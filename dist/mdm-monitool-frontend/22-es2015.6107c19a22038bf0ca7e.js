(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Wp6s:function(t,e,a){"use strict";a.d(e,"a",(function(){return f})),a.d(e,"b",(function(){return b})),a.d(e,"c",(function(){return p})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return h})),a.d(e,"f",(function(){return u})),a.d(e,"g",(function(){return g})),a.d(e,"h",(function(){return m}));var r=a("R1ws"),c=a("FKr1"),i=a("fXoL");const n=["*",[["mat-card-footer"]]],o=["*","mat-card-footer"],s=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],d=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Ib({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Ib({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),b=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Ib({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&i.Fb("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Ib({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Ib({type:t,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),t})(),f=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(r.a,8))},t.\u0275cmp=i.Hb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&i.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:o,decls:2,vars:0,template:function(t,e){1&t&&(i.jc(n),i.ic(0),i.ic(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Hb({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:d,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(i.jc(s),i.ic(0),i.Tb(1,"div",0),i.ic(2,1),i.Sb(),i.ic(3,2))},encapsulation:2,changeDetection:0}),t})(),g=(()=>{class t{}return t.\u0275mod=i.Lb({type:t}),t.\u0275inj=i.Kb({factory:function(e){return new(e||t)},imports:[[c.h],c.h]}),t})()},ukhu:function(t,e,a){"use strict";a.r(e),a.d(e,"UsersModule",(function(){return P}));var r=a("ofXK"),c=a("bTqV"),i=a("NFeN"),n=a("sYmb"),o=a("Wp6s"),s=a("A5z7"),d=a("tyNb"),l=a("STbY"),m=a("0IaG"),b=a("3Pt+"),u=a("d3UM"),p=a("kmnG"),f=a("qFsG"),h=a("fXoL");let g=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[r.c,n.b,b.m,b.w,f.c,p.d,u.b,s.d,i.b,c.b,m.f]]}),t})(),S=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[r.c,n.b,o.g,s.d,c.b,i.b,l.b,m.f,d.f,g]]}),t})(),T=[{name:"Owner",value:"owner"},{name:"DataEntryUser",value:"input"},{name:"ReadOnlyUser",value:"read"}],v=[{name:"AccountMDM",value:"internal"},{name:"AccountPartner",value:"partner"}];var B=a("Tj/N"),D=a("qfBg"),x=a("c3AT"),y=a("FKr1");function k(t,e){if(1&t&&(h.Tb(0,"mat-option",15),h.Dc(1),h.fc(2,"translate"),h.Sb()),2&t){const t=e.$implicit;h.kc("value",t.value),h.Bb(1),h.Ec(h.gc(2,2,t.name))}}function w(t,e){if(1&t&&(h.Tb(0,"mat-option",15),h.Dc(1),h.Sb()),2&t){const t=e.$implicit;h.kc("value",t.id),h.Bb(1),h.Ec(t.name)}}function E(t,e){if(1&t&&(h.Tb(0,"div"),h.Tb(1,"div",6),h.Tb(2,"div",7),h.Dc(3),h.fc(4,"translate"),h.Sb(),h.Tb(5,"mat-form-field",8),h.Tb(6,"mat-select",16),h.fc(7,"translate"),h.Bc(8,w,2,2,"mat-option",10),h.Sb(),h.Tb(9,"mat-hint"),h.Tb(10,"mat-icon"),h.Dc(11,"info"),h.Sb(),h.Dc(12),h.fc(13,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&t){const t=h.ec(2);h.Bb(3),h.Ec(h.gc(4,4,"User")),h.Bb(3),h.lc("placeholder",h.gc(7,6,"User")),h.Bb(2),h.kc("ngForOf",t.users),h.Bb(4),h.Ec(h.gc(13,8,"Tooltip.UserEdition.User"))}}function F(t,e){1&t&&(h.Tb(0,"div",6),h.Tb(1,"div",7),h.Dc(2),h.fc(3,"translate"),h.Sb(),h.Tb(4,"mat-form-field",8),h.Ob(5,"input",17),h.fc(6,"translate"),h.Tb(7,"mat-hint"),h.Tb(8,"mat-icon"),h.Dc(9,"info"),h.Sb(),h.Dc(10),h.fc(11,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(12,"div",6),h.Tb(13,"div",7),h.Dc(14),h.fc(15,"translate"),h.Sb(),h.Tb(16,"mat-form-field",8),h.Ob(17,"input",18),h.fc(18,"translate"),h.Tb(19,"mat-hint"),h.Tb(20,"mat-icon"),h.Dc(21,"info"),h.Sb(),h.Dc(22),h.fc(23,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(24,"div",6),h.Tb(25,"div",7),h.Dc(26),h.fc(27,"translate"),h.Sb(),h.Tb(28,"mat-form-field",8),h.Ob(29,"input",19),h.fc(30,"translate"),h.Tb(31,"mat-hint"),h.Tb(32,"mat-icon"),h.Dc(33,"info"),h.Sb(),h.Dc(34),h.fc(35,"translate"),h.Sb(),h.Sb(),h.Sb()),2&t&&(h.Bb(2),h.Ec(h.gc(3,9,"Login")),h.Bb(3),h.lc("placeholder",h.gc(6,11,"Login")),h.Bb(5),h.Ec(h.gc(11,13,"Tooltip.UserEdition.User")),h.Bb(4),h.Ec(h.gc(15,15,"FullName")),h.Bb(3),h.lc("placeholder",h.gc(18,17,"FullName")),h.Bb(5),h.Ec(h.gc(23,19,"Tooltip.UserEdition.User")),h.Bb(4),h.Ec(h.gc(27,21,"Password")),h.Bb(3),h.lc("placeholder",h.gc(30,23,"Password")),h.Bb(5),h.Ec(h.gc(35,25,"Tooltip.UserEdition.User")))}function j(t,e){if(1&t&&(h.Tb(0,"mat-option",15),h.Dc(1),h.fc(2,"translate"),h.Sb()),2&t){const t=e.$implicit;h.kc("value",t.value),h.Bb(1),h.Ec(h.gc(2,2,t.name))}}function C(t,e){if(1&t){const t=h.Ub();h.Tb(0,"mat-chip",23),h.ac("removed",(function(){h.sc(t);const a=e.$implicit;return h.ec(3).onSiteRemoved(a)})),h.Dc(1),h.Tb(2,"mat-icon",24),h.Dc(3,"cancel"),h.Sb(),h.Sb()}if(2&t){const t=e.$implicit;h.kc("removable",!0),h.Bb(1),h.Fc(" ",t.name," ")}}function N(t,e){if(1&t&&(h.Tb(0,"mat-option",15),h.Dc(1),h.Sb()),2&t){const t=e.$implicit;h.kc("value",t),h.Bb(1),h.Ec(t.name)}}function I(t,e){if(1&t){const t=h.Ub();h.Tb(0,"mat-chip",23),h.ac("removed",(function(){h.sc(t);const a=e.$implicit;return h.ec(3).onDataSourceRemoved(a)})),h.Dc(1),h.Tb(2,"mat-icon",24),h.Dc(3,"cancel"),h.Sb(),h.Sb()}if(2&t){const t=e.$implicit;h.kc("removable",!0),h.Bb(1),h.Fc(" ",t.name," ")}}function U(t,e){if(1&t&&(h.Tb(0,"mat-option",15),h.Dc(1),h.Sb()),2&t){const t=e.$implicit;h.kc("value",t),h.Bb(1),h.Ec(t.name)}}function A(t,e){if(1&t&&(h.Tb(0,"div"),h.Tb(1,"div",6),h.Tb(2,"div",7),h.Dc(3),h.fc(4,"translate"),h.Sb(),h.Tb(5,"mat-form-field",8),h.Tb(6,"mat-select",20),h.fc(7,"translate"),h.Tb(8,"mat-select-trigger"),h.Tb(9,"mat-chip-list"),h.Bc(10,C,4,2,"mat-chip",21),h.Sb(),h.Sb(),h.Bc(11,N,2,2,"mat-option",10),h.Sb(),h.Tb(12,"mat-hint"),h.Tb(13,"mat-icon"),h.Dc(14,"info"),h.Sb(),h.Dc(15),h.fc(16,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(17,"div",6),h.Tb(18,"div",7),h.Dc(19),h.fc(20,"translate"),h.Sb(),h.Tb(21,"mat-form-field",8),h.Tb(22,"mat-select",22),h.fc(23,"translate"),h.Tb(24,"mat-select-trigger"),h.Tb(25,"mat-chip-list"),h.Bc(26,I,4,2,"mat-chip",21),h.Sb(),h.Sb(),h.Bc(27,U,2,2,"mat-option",10),h.Sb(),h.Tb(28,"mat-hint"),h.Tb(29,"mat-icon"),h.Dc(30,"info"),h.Sb(),h.Dc(31),h.fc(32,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&t){const t=h.ec(2);h.Bb(3),h.Ec(h.gc(4,10,"CollectionSites")),h.Bb(3),h.lc("placeholder",h.gc(7,12,"CollectionSites")),h.Bb(4),h.kc("ngForOf",t.selectedSites),h.Bb(1),h.kc("ngForOf",t.collectionSites),h.Bb(4),h.Fc("",h.gc(16,14,"Tooltip.BasicsEdition.Thematics")," "),h.Bb(4),h.Ec(h.gc(20,16,"DataSources")),h.Bb(3),h.lc("placeholder",h.gc(23,18,"DataSources")),h.Bb(4),h.kc("ngForOf",t.selectedDataSources),h.Bb(1),h.kc("ngForOf",t.dataSources),h.Bb(4),h.Fc("",h.gc(32,20,"Tooltip.BasicsEdition.Thematics")," ")}}function O(t,e){if(1&t&&(h.Tb(0,"mat-dialog-content",5),h.Tb(1,"div",6),h.Tb(2,"div",7),h.Dc(3),h.fc(4,"translate"),h.Sb(),h.Tb(5,"mat-form-field",8),h.Tb(6,"mat-select",9),h.fc(7,"translate"),h.Bc(8,k,3,4,"mat-option",10),h.Sb(),h.Tb(9,"mat-hint"),h.Tb(10,"mat-icon"),h.Dc(11,"info"),h.Sb(),h.Dc(12),h.fc(13,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Bc(14,E,14,10,"div",11),h.Bc(15,F,36,27,"ng-template",null,12,h.Cc),h.Tb(17,"div",6),h.Tb(18,"div",7),h.Dc(19),h.fc(20,"translate"),h.Sb(),h.Tb(21,"mat-form-field",8),h.Tb(22,"mat-select",13),h.fc(23,"translate"),h.Bc(24,j,3,4,"mat-option",10),h.Sb(),h.Tb(25,"mat-hint"),h.Tb(26,"mat-icon"),h.Dc(27,"info"),h.Sb(),h.Dc(28),h.fc(29,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Bc(30,A,33,22,"div",14),h.Sb()),2&t){const t=h.qc(16),e=h.ec();h.kc("formGroup",e.userForm),h.Bb(3),h.Ec(h.gc(4,12,"Type")),h.Bb(3),h.lc("placeholder",h.gc(7,14,"Type")),h.Bb(2),h.kc("ngForOf",e.types),h.Bb(4),h.Ec(h.gc(13,16,"Tooltip.UserEdition.Type")),h.Bb(2),h.kc("ngIf",e.userForm.value.type===e.types[0].value)("ngIfElse",t),h.Bb(5),h.Ec(h.gc(20,18,"Role")),h.Bb(3),h.lc("placeholder",h.gc(23,20,"Role")),h.Bb(2),h.kc("ngForOf",e.roles),h.Bb(4),h.Ec(h.gc(29,22,"Tooltip.UserEdition.Role")),h.Bb(2),h.kc("ngIf",e.userForm.value.role===e.roles[1].value)}}let M=(()=>{class t{constructor(t,e,a,r,c){this.fb=t,this.dialogRef=e,this.data=a,this.userService=r,this.projectService=c}get selectedSites(){return this.userForm?this.collectionSites.filter(t=>this.userForm.controls.entities.value.includes(t)):[]}get selectedDataSources(){return this.userForm?this.dataSources.filter(t=>this.userForm.controls.dataSources.value.includes(t)):[]}ngOnInit(){this.types=v,this.roles=T,this.projectService.openedProject.subscribe(t=>{this.project=t,this.collectionSites=t.entities,this.dataSources=t.forms,this.resetChanges()}),this.userService.list().then(t=>{this.users=t})}onSubmit(){const t=new B.a(this.userForm.value);this.dialogRef.close({data:t})}resetChanges(){this.userForm=this.fb.group({id:[this.data?this.data.id:null,b.x.required],role:[this.data?this.data.role:null,b.x.required],type:[this.data?this.data.type:this.types[0].value,b.x.required],entities:[this.data&&this.data.entities?this.data.entities:[],b.x.required],dataSources:[this.data&&this.data.dataSources?this.data.dataSources:[],b.x.required],name:[this.data?this.data.name:null,b.x.required],username:[this.data?this.data.username:null,b.x.required],password:[this.data?this.data.password:null,b.x.required]})}onSiteRemoved(t){this.userForm.controls.entities.setValue(this.userForm.controls.entities.value.filter(e=>e.id!==t.id))}onDataSourceRemoved(t){this.userForm.controls.dataSources.setValue(this.userForm.controls.dataSources.value.filter(e=>e.id!==t.id))}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(b.f),h.Nb(m.g),h.Nb(m.a),h.Nb(D.a),h.Nb(x.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-user-modal"]],decls:16,vars:10,consts:[["mat-icon-button","","mat-dialog-close","",1,"dialog-close"],["mat-dialog-title",""],["class","mdm-dialog",3,"formGroup",4,"ngIf"],["align","end"],["mat-stroked-button","",1,"mdm-button",3,"click"],[1,"mdm-dialog",3,"formGroup"],[1,"mdm-form-group"],[1,"mdm-form-label"],["appearance","outline",1,"mdm-form-field"],["formControlName","type",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["elseBlock",""],["formControlName","role",3,"placeholder"],[4,"ngIf"],[3,"value"],["formControlName","id",3,"placeholder"],["matInput","","formControlName","username",3,"placeholder"],["matInput","","formControlName","name",3,"placeholder"],["type","password","matInput","","formControlName","password",3,"placeholder"],["formControlName","entities","multiple","",3,"placeholder"],[3,"removable","removed",4,"ngFor","ngForOf"],["formControlName","dataSources","multiple","",3,"placeholder"],[3,"removable","removed"],["matChipRemove",""]],template:function(t,e){1&t&&(h.Tb(0,"button",0),h.Tb(1,"mat-icon"),h.Dc(2,"close"),h.Sb(),h.Sb(),h.Tb(3,"h2",1),h.Dc(4),h.fc(5,"translate"),h.Sb(),h.Bc(6,O,31,24,"mat-dialog-content",2),h.Tb(7,"mat-dialog-actions",3),h.Tb(8,"button",4),h.ac("click",(function(){return e.onSubmit()})),h.Dc(9),h.fc(10,"translate"),h.Sb(),h.Tb(11,"button",4),h.ac("click",(function(){return e.resetChanges()})),h.Tb(12,"mat-icon"),h.Dc(13,"undo"),h.Sb(),h.Dc(14),h.fc(15,"translate"),h.Sb(),h.Sb()),2&t&&(h.Bb(4),h.Ec(h.gc(5,4,"UserEdition")),h.Bb(2),h.kc("ngIf",e.userForm),h.Bb(3),h.Ec(h.gc(10,6,"UpdateUser")),h.Bb(5),h.Ec(h.gc(15,8,"ResetChanges")))},directives:[c.a,m.d,i.a,m.h,r.l,m.c,m.e,b.s,b.k,p.b,u.a,b.r,b.i,r.k,p.e,y.m,f.b,b.c,u.c,s.b,s.a,s.c],pipes:[n.c],styles:[""]}),t})();var q=a("quSY");let R=(()=>{class t{constructor(t,e){this.dialog=t,this.userService=e,this.delete=new h.o,this.edit=new h.o}get login(){return"internal"!==this.user.type?this.user.username:this.user.id?this.user.id.split(":")[1]:""}get role(){return T.find(t=>t.value===this.user.role).name}get name(){return"internal"===this.user.type&&this.MDMusers?this.MDMusers.find(t=>t.id===this.user.id).name:"partner"===this.user.type?this.user.name:""}ngOnInit(){this.userService.list().then(t=>{this.MDMusers=t})}onDelete(){this.delete.emit(this.user.id)}openDialog(){this.dialog.open(M,{data:this.user}).afterClosed().subscribe(t=>{t&&t.data&&this.edit.emit(t.data)})}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(m.b),h.Nb(D.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-user"]],inputs:{user:"user"},outputs:{delete:"delete",edit:"edit"},decls:35,vars:18,consts:[[1,"card-header"],[1,"card-info"],[1,"card-info-title"],[1,"card-info-value"],["align","end",1,"mdm-button-group"],["mat-stroked-button","",1,"mdm-button",3,"click"],["mat-stroked-button","","mat-icon-button","",1,"mdm-button",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(t,e){if(1&t&&(h.Tb(0,"mat-card"),h.Tb(1,"mat-card-header",0),h.Tb(2,"mat-card-title"),h.Dc(3),h.Sb(),h.Sb(),h.Tb(4,"mat-card-content"),h.Tb(5,"div",1),h.Tb(6,"div",2),h.Dc(7),h.fc(8,"translate"),h.Sb(),h.Tb(9,"div",3),h.Dc(10),h.Sb(),h.Sb(),h.Tb(11,"div",1),h.Tb(12,"div",2),h.Dc(13),h.fc(14,"translate"),h.Sb(),h.Tb(15,"div",3),h.Tb(16,"mat-chip-list"),h.Tb(17,"mat-chip"),h.Dc(18),h.fc(19,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(20,"mat-card-actions",4),h.Tb(21,"button",5),h.ac("click",(function(){return e.openDialog()})),h.Dc(22),h.fc(23,"translate"),h.Sb(),h.Tb(24,"button",6),h.Tb(25,"mat-icon"),h.Dc(26,"expand_more"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(27,"mat-menu",null,7),h.Tb(29,"button",8),h.ac("click",(function(){return e.onDelete()})),h.Tb(30,"mat-icon"),h.Dc(31,"delete"),h.Sb(),h.Tb(32,"span"),h.Dc(33),h.fc(34,"translate"),h.Sb(),h.Sb(),h.Sb()),2&t){const t=h.qc(28);h.Bb(3),h.Ec(e.user.name),h.Bb(4),h.Ec(h.gc(8,8,"Login")),h.Bb(3),h.Ec(e.login),h.Bb(3),h.Ec(h.gc(14,10,"Role")),h.Bb(5),h.Ec(h.gc(19,12,e.role)),h.Bb(4),h.Ec(h.gc(23,14,"Edit")),h.Bb(2),h.kc("matMenuTriggerFor",t),h.Bb(9),h.Ec(h.gc(34,16,"Delete"))}},directives:[o.a,o.e,o.h,o.d,s.b,s.a,o.b,c.a,l.c,i.a,l.d,l.a],pipes:[n.c],styles:[""]}),t})();function L(t,e){if(1&t){const t=h.Ub();h.Tb(0,"app-user",4),h.ac("delete",(function(e){return h.sc(t),h.ec().onDelete(e)}))("edit",(function(e){return h.sc(t),h.ec().onEdit(e)})),h.Sb()}2&t&&h.kc("user",e.$implicit)}const $=[{path:"",component:(()=>{class t{constructor(t,e){this.dialog=t,this.projectService=e,this.subscription=new q.a}ngOnInit(){this.users=[],this.subscription.add(this.projectService.openedProject.subscribe(t=>{this.project=t,this.users=this.project.users}))}onDelete(t){const e=this.project.users.findIndex(e=>e.id===t);this.project.users.splice(e,1),this.projectService.project.next(this.project)}onEdit(t){let e=null;e=this.project.users.findIndex("internal"===t.type?e=>e.id===t.id:e=>e.username===t.username),this.project.users[e]=t,this.projectService.project.next(this.project)}openDialog(){this.dialog.open(M).afterClosed().subscribe(t=>{t&&t.data&&(this.project.users.push(t.data),this.projectService.project.next(this.project))})}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(m.b),h.Nb(x.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-users"]],decls:14,vars:10,consts:[[1,"info-section","blue"],[1,"mdm-cards"],["class","mdm-card",3,"user","delete","edit",4,"ngFor","ngForOf"],["mat-stroked-button","",1,"mdm-button",3,"click"],[1,"mdm-card",3,"user","delete","edit"]],template:function(t,e){1&t&&(h.Tb(0,"div",0),h.Tb(1,"p"),h.Dc(2),h.fc(3,"translate"),h.Sb(),h.Tb(4,"p"),h.Dc(5),h.fc(6,"translate"),h.Sb(),h.Sb(),h.Tb(7,"div",1),h.Bc(8,L,1,1,"app-user",2),h.Sb(),h.Tb(9,"button",3),h.ac("click",(function(){return e.openDialog()})),h.Tb(10,"mat-icon"),h.Dc(11,"add"),h.Sb(),h.Dc(12),h.fc(13,"translate"),h.Sb()),2&t&&(h.Bb(2),h.Ec(h.gc(3,4,"ProjectsUserInfo.0")),h.Bb(3),h.Ec(h.gc(6,6,"ProjectsUserInfo.1")),h.Bb(3),h.kc("ngForOf",e.users),h.Bb(4),h.Fc(" ",h.gc(13,8,"AddNewUser"),"\n"))},directives:[r.k,c.a,i.a,R],pipes:[n.c],styles:[""]}),t})()}];let K=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[d.f.forChild($)],d.f]}),t})(),P=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},imports:[[r.c,n.b,K,S,c.b,i.b]]}),t})()}}]);
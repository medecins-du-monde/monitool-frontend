(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{QlGT:function(t,e,n){"use strict";n.d(e,"a",(function(){return de}));var r=n("3Pt+"),i=n("0IaG"),a="INUMBER",o="IVAR",s="IEXPR";function c(t,e){this.type=t,this.value=null!=e?e:0}function u(t){return new c("IOP1",t)}function p(t){return new c("IOP2",t)}function l(t){return new c("IOP3",t)}function h(t,e,n){var r,i,c,u,p,l,b=[];if(d(t))return m(t,n);for(var g=t.length,v=0;v<g;v++){var y=t[v],w=y.type;if(w===a||"IVARNAME"===w)b.push(y.value);else if("IOP2"===w)i=b.pop(),r=b.pop(),b.push("and"===y.value?!!r&&!!h(i,e,n):"or"===y.value?!!r||!!h(i,e,n):"="===y.value?(u=e.binaryOps[y.value])(r,h(i,e,n),n):(u=e.binaryOps[y.value])(m(r,n),m(i,n)));else if("IOP3"===w)c=b.pop(),i=b.pop(),r=b.pop(),b.push("?"===y.value?h(r?i:c,e,n):(u=e.ternaryOps[y.value])(m(r,n),m(i,n),m(c,n)));else if(w===o)if(y.value in e.functions)b.push(e.functions[y.value]);else if(y.value in e.unaryOps&&e.parser.isOperatorEnabled(y.value))b.push(e.unaryOps[y.value]);else{var x=n[y.value];if(void 0===x)throw new Error("undefined variable: "+y.value);b.push(x)}else if("IOP1"===w)r=b.pop(),b.push((u=e.unaryOps[y.value])(m(r,n)));else if("IFUNCALL"===w){for(l=y.value,p=[];l-- >0;)p.unshift(m(b.pop(),n));if(!(u=b.pop()).apply||!u.call)throw new Error(u+" is not a function");b.push(u.apply(void 0,p))}else if("IFUNDEF"===w)b.push(function(){for(var t=b.pop(),r=[],i=y.value;i-- >0;)r.unshift(b.pop());var a=b.pop(),o=function(){for(var i=Object.assign({},n),a=0,o=r.length;a<o;a++)i[r[a]]=arguments[a];return h(t,e,i)};return Object.defineProperty(o,"name",{value:a,writable:!1}),n[a]=o,o}());else if(w===s)b.push(f(y,e));else if("IEXPREVAL"===w)b.push(y);else if("IMEMBER"===w)r=b.pop(),b.push(r[y.value]);else if("IENDSTATEMENT"===w)b.pop();else{if("IARRAY"!==w)throw new Error("invalid Expression");for(l=y.value,p=[];l-- >0;)p.unshift(b.pop());b.push(p)}}if(b.length>1)throw new Error("invalid Expression (parity)");return 0===b[0]?0:m(b[0],n)}function f(t,e,n){return d(t)?t:{type:"IEXPREVAL",value:function(n){return h(t.value,e,n)}}}function d(t){return t&&"IEXPREVAL"===t.type}function m(t,e){return d(t)?t.value(e):t}function b(t,e){for(var n,r,i,c,u,p,l=[],h=0;h<t.length;h++){var f=t[h],d=f.type;if(d===a)"number"==typeof f.value&&f.value<0?l.push("("+f.value+")"):Array.isArray(f.value)?l.push("["+f.value.map(g).join(", ")+"]"):l.push(g(f.value));else if("IOP2"===d)r=l.pop(),n=l.pop(),c=f.value,l.push(e?"^"===c?"Math.pow("+n+", "+r+")":"and"===c?"(!!"+n+" && !!"+r+")":"or"===c?"(!!"+n+" || !!"+r+")":"||"===c?"(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))":"=="===c?"("+n+" === "+r+")":"!="===c?"("+n+" !== "+r+")":"["===c?n+"[("+r+") | 0]":"("+n+" "+c+" "+r+")":"["===c?n+"["+r+"]":"("+n+" "+c+" "+r+")");else if("IOP3"===d){if(i=l.pop(),r=l.pop(),n=l.pop(),"?"!==(c=f.value))throw new Error("invalid Expression");l.push("("+n+" ? "+r+" : "+i+")")}else if(d===o||"IVARNAME"===d)l.push(f.value);else if("IOP1"===d)n=l.pop(),l.push("-"===(c=f.value)||"+"===c?"("+c+n+")":e?"not"===c?"(!"+n+")":"!"===c?"fac("+n+")":c+"("+n+")":"!"===c?"("+n+"!)":"("+c+" "+n+")");else if("IFUNCALL"===d){for(p=f.value,u=[];p-- >0;)u.unshift(l.pop());c=l.pop(),l.push(c+"("+u.join(", ")+")")}else if("IFUNDEF"===d){for(r=l.pop(),p=f.value,u=[];p-- >0;)u.unshift(l.pop());n=l.pop(),l.push(e?"("+n+" = function("+u.join(", ")+") { return "+r+" })":"("+n+"("+u.join(", ")+") = "+r+")")}else if("IMEMBER"===d)n=l.pop(),l.push(n+"."+f.value);else if("IARRAY"===d){for(p=f.value,u=[];p-- >0;)u.unshift(l.pop());l.push("["+u.join(", ")+"]")}else if(d===s)l.push("("+b(f.value,e)+")");else if("IENDSTATEMENT"!==d)throw new Error("invalid Expression")}return l.length>1&&(l=e?[l.join(",")]:[l.join(";")]),String(l[0])}function g(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function y(t,e,n){for(var r=!!(n=n||{}).withMembers,i=null,a=0;a<t.length;a++){var c=t[a];c.type===o||"IVARNAME"===c.type?r||v(e,c.value)?null!==i?(v(e,i)||e.push(i),i=c.value):i=c.value:e.push(c.value):"IMEMBER"===c.type&&r&&null!==i?i+="."+c.value:c.type===s?y(c.value,e,n):null!==i&&(v(e,i)||e.push(i),i=null)}null===i||v(e,i)||e.push(i)}function w(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}c.prototype.toString=function(){switch(this.type){case a:case"IOP1":case"IOP2":case"IOP3":case o:case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},w.prototype.simplify=function(t){return new w(function t(e,n,r,i,u){for(var p,l,h,f=[],d=[],m=0;m<e.length;m++){var b=e[m],g=b.type;if(g===a||"IVARNAME"===g)Array.isArray(b.value)?f.push.apply(f,t(b.value.map((function(t){return new c(a,t)})).concat(new c("IARRAY",b.value.length)),n,r,i,u)):f.push(b);else if(g===o&&u.hasOwnProperty(b.value))b=new c(a,u[b.value]),f.push(b);else if("IOP2"===g&&f.length>1)l=f.pop(),p=f.pop(),b=new c(a,(0,r[b.value])(p.value,l.value)),f.push(b);else if("IOP3"===g&&f.length>2)h=f.pop(),l=f.pop(),p=f.pop(),"?"===b.value?f.push(p.value?l.value:h.value):(b=new c(a,(0,i[b.value])(p.value,l.value,h.value)),f.push(b));else if("IOP1"===g&&f.length>0)p=f.pop(),b=new c(a,(0,n[b.value])(p.value)),f.push(b);else if(g===s){for(;f.length>0;)d.push(f.shift());d.push(new c(s,t(b.value,n,r,i,u)))}else if("IMEMBER"===g&&f.length>0)p=f.pop(),f.push(new c(a,p.value[b.value]));else{for(;f.length>0;)d.push(f.shift());d.push(b)}}for(;f.length>0;)d.push(f.shift());return d}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t=t||{}),this.parser)},w.prototype.substitute=function(t,e){return e instanceof w||(e=this.parser.parse(String(e))),new w(function t(e,n,r){for(var i=[],a=0;a<e.length;a++){var h=e[a],f=h.type;if(f===o&&h.value===n)for(var d=0;d<r.tokens.length;d++){var m,b=r.tokens[d];m="IOP1"===b.type?u(b.value):"IOP2"===b.type?p(b.value):"IOP3"===b.type?l(b.value):new c(b.type,b.value),i.push(m)}else i.push(f===s?new c(s,t(h.value,n,r)):h)}return i}(this.tokens,t,e),this.parser)},w.prototype.evaluate=function(t){return h(this.tokens,this,t=t||{})},w.prototype.toString=function(){return b(this.tokens,!1)},w.prototype.symbols=function(t){var e=[];return y(this.tokens,e,t=t||{}),e},w.prototype.variables=function(t){var e=[];y(this.tokens,e,t=t||{});var n=this.functions;return e.filter((function(t){return!(t in n)}))},w.prototype.toJSFunction=function(t,e){var n=this,r=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+b(this.simplify(e).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var x="TOP",T="TPAREN";function E(t,e,n){this.type=t,this.value=e,this.index=n}function A(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}E.prototype.toString=function(){return this.type+": "+this.value},A.prototype.newToken=function(t,e,n){return new E(t,e,null!=n?n:this.pos)},A.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},A.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},A.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},A.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var i=this.expression.substring(e+1,r);this.current=this.newToken("TSTRING",this.unescape(i),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},A.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(T,t),this.pos++,!0)},A.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("[")||(this.current=this.newToken("TBRACKET",t),this.pos++,0))},A.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},A.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},A.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken("TNUMBER",this.consts[r]),this.pos+=r.length,!0}return!1},A.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(x,r),this.pos+=r.length,!0}return!1},A.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var i=this.expression.substring(t,e);return this.current=this.newToken("TNAME",i),this.pos+=i.length,!0}return!1},A.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var k=/^[0-9a-f]{4}$/i;function S(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}A.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var i=t.substring(e+1,e+5);k.test(i)||this.parseError("Illegal escape sequence: \\u"+i),n+=String.fromCharCode(parseInt(i,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var a=t.indexOf("\\",e);n+=t.substring(e,a<0?t.length:a),e=a}return n},A.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},A.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,i=n;n<this.expression.length;){var a=this.expression.charAt(n);if(!e.test(a))break;n++,r=!0}return r&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(i,n),t)),this.pos=n),r},A.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,i=n,a=!1,o=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!a&&"."===t);)"."===t?a=!0:o=!0,n++,e=o;if(e&&(i=n),"e"===t||"E"===t){n++;for(var s=!0,c=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;c=!0,s=!1}else s=!1;n++}c||(n=i)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=i,e},A.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(x,e);else if("\u2219"===e||"\u2022"===e)this.current=this.newToken(x,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(x,">="),this.pos++):this.current=this.newToken(x,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(x,"<="),this.pos++):this.current=this.newToken(x,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(x,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(x,"=="),this.pos++):this.current=this.newToken(x,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(x,"!="),this.pos++):this.current=this.newToken(x,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},A.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},A.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},A.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},S.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},S.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?v(e,t.value):"function"==typeof e?e(t):t.value===e)},S.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},S.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},S.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e)||(this.next(),0))},S.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},S.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(x,(function(t){return t.value in e})))t.push(new c(o,this.current.value));else if(this.accept("TNUMBER"))t.push(new c(a,this.current.value));else if(this.accept("TSTRING"))t.push(new c(a,this.current.value));else if(this.accept(T,"("))this.parseExpression(t),this.expect(T,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new c("IARRAY",0));else{var n=this.parseArrayList(t);t.push(new c("IARRAY",n))}}},S.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},S.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},S.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===T&&")"===this.nextToken.value||e.push(new c("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new c(s,e)),!0)},S.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},S.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(x,"=");){var e=t.pop(),n=[],r=t.length-1;if("IFUNCALL"!==e.type){if(e.type!==o&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new c("IVARNAME",e.value)),t.push(new c(s,n)),t.push(p("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,a=e.value+1;i<a;i++){var u=r-i;t[u].type===o&&(t[u]=new c("IVARNAME",t[u].value))}this.parseVariableAssignmentExpression(n),t.push(new c(s,n)),t.push(new c("IFUNDEF",e.value))}}},S.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(x,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(x,":"),this.parseConditionalExpression(n),t.push(new c(s,e)),t.push(new c(s,n)),t.push(l("?"))}},S.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(x,"or");){var e=[];this.parseAndExpression(e),t.push(new c(s,e)),t.push(p("or"))}},S.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(x,"and");){var e=[];this.parseComparison(e),t.push(new c(s,e)),t.push(p("and"))}};var M=["==","!=","<","<=",">=",">","in"];S.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(x,M);){var e=this.current;this.parseAddSub(t),t.push(p(e.value))}};var I=["+","-","||"];S.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(x,I);){var e=this.current;this.parseTerm(t),t.push(p(e.value))}};var C=["*","/","%"];function B(t,e){return Number(t)+Number(e)}function O(t,e){return t-e}function N(t,e){return t*e}function D(t,e){return t/e}function F(t,e){return t%e}function R(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function P(t,e){return t===e}function V(t,e){return t!==e}function j(t,e){return t>e}function L(t,e){return t<e}function q(t,e){return t>=e}function U(t,e){return t<=e}function G(t,e){return Boolean(t&&e)}function $(t,e){return Boolean(t||e)}function H(t,e){return v(e,t)}function X(t){return(Math.exp(t)-Math.exp(-t))/2}function K(t){return(Math.exp(t)+Math.exp(-t))/2}function Y(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function _(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function Q(t){return Math.log(t+Math.sqrt(t*t-1))}function z(t){return Math.log((1+t)/(1-t))/2}function W(t){return Math.log(t)*Math.LOG10E}function J(t){return-t}function Z(t){return!t}function tt(t){return t<0?Math.ceil(t):Math.floor(t)}function et(t){return Math.random()*(t||1)}function nt(t){return it(t+1)}S.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(x,C);){var e=this.current;this.parseFactor(t),t.push(p(e.value))}},S.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(x,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===T&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===T&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(u(n.value))}else this.parseExponential(t)},S.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(x,"^");)this.parseFactor(t),t.push(p("^"))},S.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(x,"!");)t.push(u("!"))},S.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(x,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(u(n.value))}else for(this.parseMemberExpression(t);this.accept(T,"(");)if(this.accept(T,")"))t.push(new c("IFUNCALL",0));else{var r=this.parseArgumentList(t);t.push(new c("IFUNCALL",r))}},S.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(T,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},S.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(x,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),t.push(new c("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(p("["))}}};var rt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function it(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,i=t-1;r>1;)i*=r,r--;return 0===i&&(i=1),i}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*it(1-t));if(t>=171.35)return 1/0;if(t>85){var a=t*t,o=a*t,s=o*t,c=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*a)-139/(51840*o)-571/(2488320*s)+163879/(209018880*c)+5246819/(75246796800*c*t))}--t,n=rt[0];for(var u=1;u<rt.length;++u)n+=rt[u]/(t+u);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}function at(t){return Array.isArray(t)?t.length:String(t).length}function ot(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,i=Math.abs(arguments[n]);e<i?(t=t*(r=e/i)*r+1,e=i):t+=i>0?(r=i/e)*r:i}return e===1/0?1/0:e*Math.sqrt(t)}function st(t,e,n){return t?e:n}function ct(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function ut(t,e,n){return n&&(n[t]=e),e}function pt(t,e){return t[0|e]}function lt(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function ht(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function ft(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))}function dt(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)}function mt(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))}function bt(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function gt(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function vt(t){return(t>0)-(t<0)||+t}function yt(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function wt(t){return Math.exp(t)-1}function xt(t){return Math.log(1+t)}function Tt(t){return Math.log(t)/Math.LN2}function Et(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||X,cosh:Math.cosh||K,tanh:Math.tanh||Y,asinh:Math.asinh||_,acosh:Math.acosh||Q,atanh:Math.atanh||z,sqrt:Math.sqrt,cbrt:Math.cbrt||yt,log:Math.log,log2:Math.log2||Tt,ln:Math.log,lg:Math.log10||W,log10:Math.log10||W,expm1:Math.expm1||wt,log1p:Math.log1p||xt,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||tt,"-":J,"+":Number,exp:Math.exp,not:Z,length:at,"!":nt,sign:Math.sign||vt},this.binaryOps={"+":B,"-":O,"*":N,"/":D,"%":F,"^":Math.pow,"||":R,"==":P,"!=":V,">":j,"<":L,">=":q,"<=":U,and:G,or:$,in:H,"=":ut,"[":pt},this.ternaryOps={"?":st},this.functions={random:et,fac:nt,min:ht,max:lt,hypot:Math.hypot||ot,pyt:Math.hypot||ot,pow:Math.pow,atan2:Math.atan2,if:st,gamma:it,roundTo:ct,map:ft,fold:dt,filter:mt,indexOf:bt,join:gt},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Et.prototype.parse=function(t){var e=[],n=new S(this,new A(this,t),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(e),n.expect("TEOF","EOF"),new w(e,this)},Et.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var At=new Et;Et.parse=function(t){return At.parse(t)},Et.evaluate=function(t,e){return At.parse(t).evaluate(e)};var kt={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Et.prototype.isOperatorEnabled=function(t){var e=function(t){return kt.hasOwnProperty(t)?kt[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};var St=n("LvDl"),Mt=n("2Vo4"),It=n("IPwQ"),Ct=n("fXoL"),Bt=n("bTqV"),Ot=n("NFeN"),Nt=n("ofXK"),Dt=n("kmnG"),Ft=n("qFsG"),Rt=n("d3UM"),Pt=n("FKr1"),Vt=n("+0xr"),jt=n("A5z7"),Lt=n("sYmb");function qt(t,e){if(1&t&&(Ct.Tb(0,"div",4),Ct.Tb(1,"div",5),Ct.Dc(2),Ct.fc(3,"translate"),Ct.Sb(),Ct.Tb(4,"label"),Ct.Dc(5),Ct.Sb(),Ct.Sb()),2&t){const t=Ct.ec();Ct.Bb(2),Ct.Ec(Ct.gc(3,2,"Description")),Ct.Bb(3),Ct.Ec(t.data.indicator.value.description?t.data.indicator.value.description.en:null)}}function Ut(t,e){1&t&&(Ct.Tb(0,"div",4),Ct.Tb(1,"div",5),Ct.Dc(2),Ct.fc(3,"translate"),Ct.Sb(),Ct.Tb(4,"mat-form-field",6),Ct.Ob(5,"input",14),Ct.fc(6,"translate"),Ct.Tb(7,"mat-hint"),Ct.Tb(8,"mat-icon"),Ct.Dc(9,"info"),Ct.Sb(),Ct.Dc(10),Ct.fc(11,"translate"),Ct.Sb(),Ct.Sb(),Ct.Sb()),2&t&&(Ct.Bb(2),Ct.Ec(Ct.gc(3,3,"Name")),Ct.Bb(3),Ct.lc("placeholder",Ct.gc(6,5,"Name")),Ct.Bb(5),Ct.Fc("",Ct.gc(11,7,"Tooltip.BasicsEdition.Name")," "))}function Gt(t,e){if(1&t&&(Ct.Tb(0,"mat-option",15),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t){const t=e.$implicit;Ct.kc("value",t.value),Ct.Bb(1),Ct.Fc("",Ct.gc(2,2,t.display)," ")}}function $t(t,e){1&t&&(Ct.Tb(0,"div",16),Ct.Tb(1,"mat-form-field",6),Ct.Ob(2,"input",17),Ct.fc(3,"translate"),Ct.Sb(),Ct.Sb()),2&t&&(Ct.Bb(2),Ct.lc("placeholder",Ct.gc(3,1,"Enum.Computation.fixed")))}function Ht(t,e){1&t&&(Ct.Tb(0,"th",30),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t&&(Ct.Bb(1),Ct.Ec(Ct.gc(2,1,"Parameter")))}function Xt(t,e){if(1&t&&(Ct.Tb(0,"span"),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t){const t=Ct.ec().$implicit,e=Ct.ec(2);Ct.Bb(1),Ct.Ec(Ct.gc(2,1,"copy"!==e.type?"Enum.Formula."+t.symbol:"Enum.Formula.copied"))}}function Kt(t,e){if(1&t&&(Ct.Tb(0,"span"),Ct.Dc(1),Ct.Sb()),2&t){const t=Ct.ec().$implicit;Ct.Bb(1),Ct.Ec(t.symbol)}}function Yt(t,e){if(1&t&&(Ct.Tb(0,"td",31),Ct.Bc(1,Xt,3,3,"span",32),Ct.Bc(2,Kt,2,1,"span",32),Ct.Sb()),2&t){const t=Ct.ec(2);Ct.Bb(1),Ct.kc("ngIf","formula"!==t.type),Ct.Bb(1),Ct.kc("ngIf","formula"===t.type)}}function _t(t,e){1&t&&Ct.Ob(0,"td",33)}function Qt(t,e){1&t&&(Ct.Tb(0,"th",30),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t&&(Ct.Bb(1),Ct.Ec(Ct.gc(2,1,"Variable")))}function zt(t,e){if(1&t&&(Ct.Tb(0,"mat-option",15),Ct.Dc(1),Ct.Sb()),2&t){const t=e.$implicit;Ct.kc("value",t.id),Ct.Bb(1),Ct.Fc(" ",t.name," ")}}function Wt(t,e){if(1&t&&(Ct.Tb(0,"mat-optgroup",37),Ct.Bc(1,zt,2,2,"mat-option",10),Ct.Sb()),2&t){const t=e.$implicit;Ct.kc("label",t.name),Ct.Bb(1),Ct.kc("ngForOf",t.elements)}}function Jt(t,e){if(1&t){const t=Ct.Ub();Ct.Tb(0,"td",34),Ct.Tb(1,"mat-form-field",6),Ct.Tb(2,"mat-select",35),Ct.ac("selectionChange",(function(n){Ct.sc(t);const r=e.$implicit;return Ct.ec(2).onVariableSelected(n,r)})),Ct.fc(3,"translate"),Ct.Bc(4,Wt,2,2,"mat-optgroup",36),Ct.Sb(),Ct.Sb(),Ct.Sb()}if(2&t){const t=e.$implicit,n=Ct.ec(2);Ct.kc("formGroupName",t.symbol),Ct.Bb(2),Ct.lc("placeholder",Ct.gc(3,3,"Variable")),Ct.Bb(2),Ct.kc("ngForOf",n.data.forms)}}function Zt(t,e){1&t&&(Ct.Tb(0,"td",33),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t&&(Ct.Bb(1),Ct.Ec(Ct.gc(2,1,"Help.Variable")))}function te(t,e){1&t&&(Ct.Tb(0,"th",30),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t&&(Ct.Bb(1),Ct.Ec(Ct.gc(2,1,"Disaggregations")))}function ee(t,e){if(1&t){const t=Ct.Ub();Ct.Tb(0,"mat-chip",42),Ct.ac("removed",(function(){Ct.sc(t);const n=e.$implicit,r=Ct.ec().$implicit,i=Ct.ec(2).$implicit;return Ct.ec(2).onPartitionElementRemoved(i.symbol,r.id,n.id)})),Ct.Dc(1),Ct.Tb(2,"mat-icon",43),Ct.Dc(3,"cancel"),Ct.Sb(),Ct.Sb()}if(2&t){const t=e.$implicit;Ct.kc("removable",!0),Ct.Bb(1),Ct.Fc(" ",t.name," ")}}function ne(t,e){if(1&t&&(Ct.Tb(0,"mat-option",15),Ct.Dc(1),Ct.Sb()),2&t){const t=e.$implicit;Ct.kc("value",t),Ct.Bb(1),Ct.Fc("",t.name," ")}}function re(t,e){if(1&t&&(Ct.Rb(0,39),Ct.Dc(1),Ct.Tb(2,"mat-form-field",6),Ct.Tb(3,"mat-select",40),Ct.fc(4,"translate"),Ct.Tb(5,"mat-select-trigger"),Ct.Tb(6,"mat-chip-list"),Ct.Bc(7,ee,4,2,"mat-chip",41),Ct.Sb(),Ct.Sb(),Ct.Bc(8,ne,2,2,"mat-option",10),Ct.Sb(),Ct.Sb(),Ct.Ob(9,"br"),Ct.Qb()),2&t){const t=e.$implicit,n=Ct.ec(2).$implicit,r=Ct.ec(2);Ct.Bb(1),Ct.Fc(" ",t.name," "),Ct.Bb(2),Ct.lc("placeholder",Ct.gc(4,5,"partitionElement")),Ct.kc("formControlName",t.id),Ct.Bb(4),Ct.kc("ngForOf",r.getPartitions(n.symbol,t.id)),Ct.Bb(1),Ct.kc("ngForOf",t.elements)}}function ie(t,e){if(1&t&&(Ct.Tb(0,"div"),Ct.Bc(1,re,10,7,"ng-container",38),Ct.Sb()),2&t){const t=Ct.ec().$implicit;Ct.Bb(1),Ct.kc("ngForOf",t.filter.partitions)}}function ae(t,e){if(1&t&&(Ct.Tb(0,"td",34),Ct.Bc(1,ie,2,1,"div",32),Ct.Sb()),2&t){const t=e.$implicit;Ct.kc("formGroupName",t.symbol),Ct.Bb(1),Ct.kc("ngIf",t.filter)}}function oe(t,e){1&t&&(Ct.Tb(0,"td",33),Ct.Dc(1),Ct.fc(2,"translate"),Ct.Sb()),2&t&&(Ct.Bb(1),Ct.Ec(Ct.gc(2,1,"Help.Partition")))}function se(t,e){if(1&t){const t=Ct.Ub();Ct.Tb(0,"td",30),Ct.Tb(1,"mat-form-field",6),Ct.Tb(2,"input",44),Ct.ac("change",(function(){return Ct.sc(t),Ct.ec(2).onFormulaChange()})),Ct.fc(3,"translate"),Ct.Sb(),Ct.Sb(),Ct.Sb()}if(2&t){const t=Ct.ec(2);Ct.Cb("colspan",t.displayedColumns.length),Ct.Bb(2),Ct.lc("placeholder",Ct.gc(3,3,"Formula")),Ct.kc("readonly","formula"!==t.type)}}function ce(t,e){1&t&&Ct.Ob(0,"tr",45)}function ue(t,e){1&t&&Ct.Ob(0,"tr",45)}function pe(t,e){1&t&&Ct.Ob(0,"tr",46)}function le(t,e){1&t&&Ct.Ob(0,"tr",47)}const he=function(){return["formula"]};function fe(t,e){if(1&t&&(Ct.Tb(0,"div",16),Ct.Ob(1,"div",5),Ct.Tb(2,"table",18),Ct.Rb(3,19),Ct.Bc(4,Ht,3,3,"th",20),Ct.Bc(5,Yt,3,2,"td",21),Ct.Bc(6,_t,1,0,"td",22),Ct.Qb(),Ct.Rb(7,23),Ct.Bc(8,Qt,3,3,"th",20),Ct.Bc(9,Jt,5,5,"td",24),Ct.Bc(10,Zt,3,3,"td",22),Ct.Qb(),Ct.Rb(11,25),Ct.Bc(12,te,3,3,"th",20),Ct.Bc(13,ae,2,2,"td",24),Ct.Bc(14,oe,3,3,"td",22),Ct.Qb(),Ct.Rb(15,26),Ct.Bc(16,se,4,5,"td",20),Ct.Qb(),Ct.Bc(17,ce,1,0,"tr",27),Ct.Bc(18,ue,1,0,"tr",27),Ct.Bc(19,pe,1,0,"tr",28),Ct.Bc(20,le,1,0,"tr",29),Ct.Sb(),Ct.Sb()),2&t){const t=Ct.ec();Ct.Bb(2),Ct.kc("dataSource",t.dataSource),Ct.Bb(15),Ct.kc("matHeaderRowDef",t.displayedColumns),Ct.Bb(1),Ct.kc("matHeaderRowDef",Ct.nc(5,he)),Ct.Bb(1),Ct.kc("matRowDefColumns",t.displayedColumns),Ct.Bb(1),Ct.kc("matFooterRowDef",t.displayedColumns)}}let de=(()=>{class t{constructor(t,e,n){this.fb=t,this.dialogRef=e,this.data=n,this.displayedColumns=["parameter","variable","disaggregations"],this.dataSource=new Mt.a([]),this.dataChanged=!1,this.computationTypes=[{value:"unavailable",display:"Enum.Computation.unavailable"},{value:"fixed",display:"Enum.Computation.fixed"},{value:"copy",display:"Enum.Computation.copy"},{value:"percentage",display:"Enum.Computation.percentage"},{value:"permille",display:"Enum.Computation.permille"},{value:"formula",display:"Enum.Computation.formula"}]}get type(){return this.data.indicator.value.type}ngOnInit(){this.loadData(),this.initValue=St.cloneDeep(this.data.indicator),this.initDataSource=this.dataSource.getValue()}onSubmit(){this.dialogRef.close({indicator:this.data.indicator})}loadData(){this.parser=new Et,this.parser.consts={};try{this.symbols=this.parser.parse(this.data.indicator.value.computation.formula).variables();const t=[];this.symbols.forEach(e=>{t.push({symbol:e})}),this.dataSource.next(t)}catch(e){this.symbols=[]}const t=this.data.indicator.value.computation.parameters;if(t){const e=this.dataSource.getValue();e.forEach(e=>{e.filter=this.lookForVariable(this.data.forms,t[""+e.symbol].elementId)}),this.symbols.forEach(t=>{e.filter(e=>e.symbol===t)[0].filter.partitions.forEach(e=>{const n=this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter");let i=n.get(""+e.id).value;const a=[],o=[];"string"!=typeof i[0]&&i.forEach(t=>o.push(t.id)),o.length>0&&(i=o),e.elements.forEach(t=>{-1!==i.indexOf(t.id)&&a.push(t)}),n.setControl(""+e.id,new r.g(a))})}),this.dataSource.next(e)}this.dataChanged=!1,this.data.indicator.valueChanges.subscribe(()=>{this.dataChanged=!0})}onReset(){this.data.indicator=St.cloneDeep(this.initValue),this.dataSource.next(this.initDataSource),this.loadData()}onTypeChange(t){const e=this.data.indicator.controls.computation;"fixed"===t.value&&isNaN(e.value.formula)?e.controls.formula.setValue("0"):"copy"===t.value?e.controls.formula.setValue(It.a):"percentage"===t.value?e.controls.formula.setValue(It.b):"permille"===t.value?e.controls.formula.setValue(It.c):"unavailable"===t.value&&e.controls.formula.setValue(null),this.onFormulaChange()}onFormulaChange(){let t=[];try{t=this.parser.parse(this.data.indicator.get("computation").value.formula).variables()}catch(i){t=[]}this.symbols=t;const e=new r.j({});this.symbols.forEach(t=>{e.addControl(""+t,this.fb.group({elementId:["",r.x.required],filter:this.fb.group({})}))}),this.data.indicator.get("computation").setControl("parameters",e);const n=[];this.symbols.forEach(t=>{n.push({symbol:t})}),this.dataSource.next(n)}onVariableSelected(t,e){const n=this.dataSource.getValue(),i=this.fb.group({});n.forEach(n=>{n.symbol===e.symbol&&(n.filter=this.lookForVariable(this.data.forms,t.value),n.filter.partitions.forEach(t=>{i.addControl(""+t.id,new r.g([]))})),this.data.indicator.controls.computation.get("parameters").get(""+e.symbol).setControl("filter",i)}),this.dataSource.next(n)}lookForVariable(t,e){let n;return t.forEach(t=>{const r=t.elements.filter(t=>t.id===e)[0];r&&(n=r)}),n}getPartitions(t,e){return this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter").get(""+e).value}onPartitionElementRemoved(t,e,n){const r=this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter").get(""+e).value;this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter").get(""+e).setValue(r.filter(t=>t.id!==n))}}return t.\u0275fac=function(e){return new(e||t)(Ct.Nb(r.f),Ct.Nb(i.g),Ct.Nb(i.a))},t.\u0275cmp=Ct.Hb({type:t,selectors:[["app-indicator-modal"]],decls:58,vars:41,consts:[["mat-icon-button","","mat-dialog-close","",1,"dialog-close"],["mat-dialog-title",""],[1,"mdm-dialog",3,"formGroup"],["class","mdm-form-group",4,"ngIf"],[1,"mdm-form-group"],[1,"mdm-form-label"],["appearance","outline",1,"mdm-form-field"],["matInput","","type","number","formControlName","baseline",3,"placeholder"],["matInput","","type","number","formControlName","target",3,"placeholder"],["formControlName","type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","mdm-form-group","formGroupName","computation",4,"ngIf"],["align","end"],["mat-stroked-button","",1,"mdm-button",3,"disabled","click"],["matInput","","formControlName","display",3,"placeholder"],[3,"value"],["formGroupName","computation",1,"mdm-form-group"],["matInput","","type","string","formControlName","formula",3,"placeholder"],["mat-table","",1,"mdm-table",3,"dataSource"],["matColumnDef","parameter"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","variable","formGroupName","parameters"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","disaggregations","formGroupName","parameters"],["matColumnDef","formula"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-footer-cell",""],["mat-cell","",3,"formGroupName"],["formControlName","elementId",3,"placeholder","selectionChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["formGroupName","filter",4,"ngFor","ngForOf"],["formGroupName","filter"],["multiple","",3,"formControlName","placeholder"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removable","removed"],["matChipRemove",""],["matInput","","formControlName","formula",3,"placeholder","readonly","change"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(Ct.Tb(0,"button",0),Ct.Tb(1,"mat-icon"),Ct.Dc(2,"close"),Ct.Sb(),Ct.Sb(),Ct.Tb(3,"h2",1),Ct.Dc(4),Ct.fc(5,"translate"),Ct.Sb(),Ct.Tb(6,"mat-dialog-content",2),Ct.Bc(7,qt,6,4,"div",3),Ct.Bc(8,Ut,12,9,"div",3),Ct.Tb(9,"div",4),Ct.Tb(10,"div",5),Ct.Dc(11),Ct.fc(12,"translate"),Ct.Sb(),Ct.Tb(13,"mat-form-field",6),Ct.Ob(14,"input",7),Ct.fc(15,"translate"),Ct.Tb(16,"mat-hint"),Ct.Tb(17,"mat-icon"),Ct.Dc(18,"info"),Ct.Sb(),Ct.Dc(19),Ct.fc(20,"translate"),Ct.Sb(),Ct.Sb(),Ct.Sb(),Ct.Tb(21,"div",4),Ct.Tb(22,"div",5),Ct.Dc(23),Ct.fc(24,"translate"),Ct.Sb(),Ct.Tb(25,"mat-form-field",6),Ct.Ob(26,"input",8),Ct.fc(27,"translate"),Ct.Tb(28,"mat-hint"),Ct.Tb(29,"mat-icon"),Ct.Dc(30,"info"),Ct.Sb(),Ct.Dc(31),Ct.fc(32,"translate"),Ct.Sb(),Ct.Sb(),Ct.Sb(),Ct.Tb(33,"div",4),Ct.Tb(34,"div",5),Ct.Dc(35),Ct.fc(36,"translate"),Ct.Sb(),Ct.Tb(37,"mat-form-field",6),Ct.Tb(38,"mat-select",9),Ct.ac("selectionChange",(function(t){return e.onTypeChange(t)})),Ct.Bc(39,Gt,3,4,"mat-option",10),Ct.Sb(),Ct.Tb(40,"mat-hint"),Ct.Tb(41,"mat-icon"),Ct.Dc(42,"info"),Ct.Sb(),Ct.Dc(43),Ct.fc(44,"translate"),Ct.Sb(),Ct.Sb(),Ct.Sb(),Ct.Bc(45,$t,4,3,"div",11),Ct.Bc(46,fe,21,6,"div",11),Ct.Sb(),Ct.Tb(47,"mat-dialog-actions",12),Ct.Tb(48,"button",13),Ct.ac("click",(function(){return e.onSubmit()})),Ct.Tb(49,"mat-icon"),Ct.Dc(50,"save"),Ct.Sb(),Ct.Dc(51),Ct.fc(52,"translate"),Ct.Sb(),Ct.Tb(53,"button",13),Ct.ac("click",(function(){return e.onReset()})),Ct.Tb(54,"mat-icon"),Ct.Dc(55,"undo"),Ct.Sb(),Ct.Dc(56),Ct.fc(57,"translate"),Ct.Sb(),Ct.Sb()),2&t&&(Ct.Bb(4),Ct.Ec(Ct.gc(5,19,"IndicatorEdition")),Ct.Bb(2),Ct.kc("formGroup",e.data.indicator),Ct.Bb(1),Ct.kc("ngIf",e.data.indicator.value.crossCutting),Ct.Bb(1),Ct.kc("ngIf",!e.data.indicator.value.crossCutting),Ct.Bb(3),Ct.Ec(Ct.gc(12,21,"Baseline")),Ct.Bb(3),Ct.lc("placeholder",Ct.gc(15,23,"Baseline")),Ct.Bb(5),Ct.Fc("",Ct.gc(20,25,"Baseline-Hint")," "),Ct.Bb(4),Ct.Ec(Ct.gc(24,27,"Target")),Ct.Bb(3),Ct.lc("placeholder",Ct.gc(27,29,"Target")),Ct.Bb(5),Ct.Fc("",Ct.gc(32,31,"Target-Hint")," "),Ct.Bb(4),Ct.Ec(Ct.gc(36,33,"Computation")),Ct.Bb(4),Ct.kc("ngForOf",e.computationTypes),Ct.Bb(4),Ct.Fc("",Ct.gc(44,35,"Computation-Hint")," "),Ct.Bb(2),Ct.kc("ngIf","fixed"===e.type),Ct.Bb(1),Ct.kc("ngIf","unavailable"!==e.type&&"fixed"!==e.type),Ct.Bb(2),Ct.kc("disabled",e.data.indicator.invalid||!e.dataChanged),Ct.Bb(3),Ct.Fc("",Ct.gc(52,37,"ApplyChanges")," "),Ct.Bb(2),Ct.kc("disabled",!e.dataChanged),Ct.Bb(3),Ct.Fc("",Ct.gc(57,39,"ResetChanges")," "))},directives:[Bt.a,i.d,Ot.a,i.h,i.e,r.s,r.k,Nt.l,Dt.b,Ft.b,r.v,r.c,r.r,r.i,Dt.e,Rt.a,Nt.k,i.c,Pt.m,r.l,Vt.n,Vt.c,Vt.i,Vt.b,Vt.e,Vt.k,Vt.m,Vt.g,Vt.h,Vt.a,Vt.d,Pt.l,Rt.c,jt.b,jt.a,jt.c,Vt.j,Vt.l,Vt.f],pipes:[Lt.c],styles:[""]}),t})()},Wp6s:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return b})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return g})),n.d(e,"h",(function(){return l}));var r=n("R1ws"),i=n("FKr1"),a=n("fXoL");const o=["*",[["mat-card-footer"]]],s=["*","mat-card-footer"],c=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],u=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Ib({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),l=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Ib({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),h=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Ib({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&a.Fb("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Ib({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),t})(),d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=a.Ib({type:t,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),t})(),m=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(e){return new(e||t)(a.Nb(r.a,8))},t.\u0275cmp=a.Hb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&a.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:s,decls:2,vars:0,template:function(t,e){1&t&&(a.jc(o),a.ic(0),a.ic(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Hb({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:u,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(a.jc(c),a.ic(0),a.Tb(1,"div",0),a.ic(2,1),a.Sb(),a.ic(3,2))},encapsulation:2,changeDetection:0}),t})(),g=(()=>{class t{}return t.\u0275mod=a.Lb({type:t}),t.\u0275inj=a.Kb({factory:function(e){return new(e||t)},imports:[[i.h],i.h]}),t})()},XEzf:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("fXoL"),i=n("Wp6s"),a=n("ofXK"),o=n("bTqV"),s=n("NFeN"),c=n("STbY"),u=n("sYmb");function p(t,e){if(1&t&&(r.Tb(0,"div",2),r.Tb(1,"div",3),r.Tb(2,"b"),r.Dc(3),r.fc(4,"translate"),r.Sb(),r.Dc(5),r.Sb(),r.Sb()),2&t){const t=r.ec();r.Bb(3),r.Fc("",r.gc(4,2,"Description"),": "),r.Bb(2),r.Ec(t.extraIndicator.description?t.extraIndicator.description.en:null)}}function l(t,e){1&t&&(r.Tb(0,"span",12),r.Dc(1),r.fc(2,"translate"),r.Tb(3,"mat-icon"),r.Dc(4,"link"),r.Sb(),r.Sb()),2&t&&(r.Bb(1),r.Fc("",r.gc(2,1,"Valid")," "))}function h(t,e){1&t&&(r.Tb(0,"span",13),r.Dc(1),r.fc(2,"translate"),r.Tb(3,"mat-icon"),r.Dc(4,"link_off"),r.Sb(),r.Sb()),2&t&&(r.Bb(1),r.Fc("",r.gc(2,1,"Invalid")," "))}function f(t,e){if(1&t&&(r.Tb(0,"button",14),r.Tb(1,"mat-icon"),r.Dc(2,"expand_more"),r.Sb(),r.Sb()),2&t){r.ec();const t=r.qc(32);r.kc("matMenuTriggerFor",t)}}let d=(()=>{class t{constructor(){this.deletable=!0,this.edit=new r.o,this.delete=new r.o}ngOnInit(){}onEdit(){this.edit.emit()}onDelete(){this.delete.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["app-extra-indicator"]],inputs:{deletable:"deletable",extraIndicator:"extraIndicator"},outputs:{edit:"edit",delete:"delete"},decls:39,vars:22,consts:[[1,"card-header"],["class","card-info",4,"ngIf"],[1,"card-info"],[1,"card-info-value"],["class","computation valid",4,"ngIf","ngIfElse"],["elseBlock",""],["align","end",1,"mdm-button-group"],["mat-stroked-button","",1,"mdm-button","small-button",3,"click"],["svgIcon","edit"],["mat-stroked-button","","mat-icon-button","","class","mdm-button small-button",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"computation","valid"],[1,"computation","invalid"],["mat-stroked-button","","mat-icon-button","",1,"mdm-button","small-button",3,"matMenuTriggerFor"]],template:function(t,e){if(1&t&&(r.Tb(0,"mat-card"),r.Tb(1,"mat-card-header",0),r.Dc(2),r.Sb(),r.Tb(3,"mat-card-content"),r.Bc(4,p,6,4,"div",1),r.Tb(5,"div",2),r.Tb(6,"div",3),r.Tb(7,"b"),r.Dc(8),r.fc(9,"translate"),r.Sb(),r.Dc(10),r.Sb(),r.Sb(),r.Tb(11,"div",2),r.Tb(12,"div",3),r.Tb(13,"b"),r.Dc(14),r.fc(15,"translate"),r.Sb(),r.Dc(16),r.Sb(),r.Sb(),r.Tb(17,"div",2),r.Tb(18,"div",3),r.Tb(19,"b"),r.Dc(20),r.fc(21,"translate"),r.Sb(),r.Bc(22,l,5,3,"span",4),r.Bc(23,h,5,3,"ng-template",null,5,r.Cc),r.Sb(),r.Sb(),r.Sb(),r.Tb(25,"mat-card-actions",6),r.Tb(26,"button",7),r.ac("click",(function(){return e.onEdit()})),r.Ob(27,"mat-icon",8),r.Dc(28),r.fc(29,"translate"),r.Sb(),r.Bc(30,f,3,1,"button",9),r.Sb(),r.Sb(),r.Tb(31,"mat-menu",null,10),r.Tb(33,"button",11),r.ac("click",(function(){return e.onDelete()})),r.Tb(34,"mat-icon"),r.Dc(35,"delete"),r.Sb(),r.Tb(36,"span"),r.Dc(37),r.fc(38,"translate"),r.Sb(),r.Sb(),r.Sb()),2&t){const t=r.qc(24);r.Bb(2),r.Ec(e.extraIndicator.display),r.Bb(2),r.kc("ngIf",e.extraIndicator.crossCutting),r.Bb(4),r.Fc("",r.gc(9,12,"Baseline"),": "),r.Bb(2),r.Ec(e.extraIndicator.baseline?e.extraIndicator.baseline:"?"),r.Bb(4),r.Fc("",r.gc(15,14,"Target"),": "),r.Bb(2),r.Ec(e.extraIndicator.target?e.extraIndicator.target:"?"),r.Bb(4),r.Fc("",r.gc(21,16,"Computation"),": "),r.Bb(2),r.kc("ngIf",e.extraIndicator.computation)("ngIfElse",t),r.Bb(6),r.Ec(r.gc(29,18,"Edit")),r.Bb(2),r.kc("ngIf",e.deletable),r.Bb(7),r.Ec(r.gc(38,20,"Delete"))}},directives:[i.a,i.e,i.d,a.l,i.b,o.a,s.a,c.d,c.a,c.c],pipes:[u.c],styles:[""]}),t})()},YjUb:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ofXK"),i=n("sYmb"),a=n("Wp6s"),o=n("bTqV"),s=n("NFeN"),c=n("tyNb"),u=n("STbY"),p=n("fXoL");let l=(()=>{class t{}return t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({factory:function(e){return new(e||t)},imports:[[r.c,i.b,a.g,o.b,u.b,c.f,s.b]]}),t})()},hPXr:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("3Pt+"),i=n("LvDl"),a=n("X4i7"),o=n("Ub+A"),s=n("/AVH"),c=n("IPwQ"),u=n("FNW4");class p{static newPurpose(t){return t||(t=new o.a),new r.j({assumptions:new r.g(t.assumptions,r.x.required),description:new r.g(t.description,r.x.required),outputs:new r.d(t.outputs.map(t=>this.newOutput(t))),indicators:new r.d(t.indicators.map(t=>this.newIndicator(t)))})}static newOutput(t){return t||(t=new a.a),new r.j({assumptions:new r.g(t.assumptions,r.x.required),description:new r.g(t.description,r.x.required),activities:new r.d(t.activities.map(t=>this.newActivity(t))),indicators:new r.d(t.indicators.map(t=>this.newIndicator(t)))})}static newActivity(t){return t||(t=new s.a),new r.j({description:new r.g(t.description,r.x.required),indicators:new r.d(t.indicators.map(t=>this.newIndicator(t)))})}static newIndicator(t=null,e=!1){const n=new c.d(t),a=new r.j({});return n.computation&&Object(i.forEach)(n.computation.parameters,(t,e)=>{const n=new r.j({});Object(i.forEach)(t.filter,(t,e)=>{n.addControl(""+e,new r.g(t))}),a.addControl(""+e,new r.j({elementId:new r.g(t.elementId,r.x.required),filter:n}))}),new r.j(e?{crossCutting:new r.g(!0,r.x.required),id:new r.g(n.id,r.x.required),description:n.description?new r.j({en:new r.g(n.description.en),es:new r.g(n.description.es),fr:new r.g(n.description.fr)}):new r.g(null),display:new r.g(n.display),baseline:new r.g(n.baseline,r.x.required),target:new r.g(n.target,r.x.required),computation:new r.j({formula:new r.g(n.computation?n.computation.formula:null),parameters:n.computation?i.cloneDeep(a):new r.j({})}),type:new r.g(n.type)}:{display:new r.g(n.display,r.x.required),baseline:new r.g(n.baseline,r.x.required),target:new r.g(n.target,r.x.required),computation:new r.j({formula:new r.g(n.computation?n.computation.formula:null),parameters:n.computation?i.cloneDeep(a):new r.j({})}),type:new r.g(n.type)})}static newTheme(t){return t||(t=new u.a),new r.j({id:new r.g(t.id,r.x.required),type:new r.g(t.type,r.x.required),name:new r.g(t.name,r.x.required),shortName:new r.g(t.shortName,r.x.required),rev:new r.g(t.rev,r.x.required)})}static newIndicatorGroup(t){return t||(t={theme:new u.a,indicators:[]}),new r.j({theme:this.newTheme(t.theme),indicators:new r.d(t.indicators.map(t=>this.newIndicator(t,!0)))})}}}}]);
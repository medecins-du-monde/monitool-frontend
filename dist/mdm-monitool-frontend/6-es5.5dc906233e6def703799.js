!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{QlGT:function(e,r,i){"use strict";i.d(r,"a",(function(){return ve}));var a=i("3Pt+"),o=i("0IaG"),s="INUMBER",c="IVAR",u="IEXPR";function p(t,e){this.type=t,this.value=null!=e?e:0}function l(t){return new p("IOP1",t)}function h(t){return new p("IOP2",t)}function f(t){return new p("IOP3",t)}function d(t,e,n){var r,i,a,o,p,l,h=[];if(b(t))return v(t,n);for(var f=t.length,g=0;g<f;g++){var y=t[g],w=y.type;if(w===s||"IVARNAME"===w)h.push(y.value);else if("IOP2"===w)i=h.pop(),r=h.pop(),h.push("and"===y.value?!!r&&!!d(i,e,n):"or"===y.value?!!r||!!d(i,e,n):"="===y.value?(o=e.binaryOps[y.value])(r,d(i,e,n),n):(o=e.binaryOps[y.value])(v(r,n),v(i,n)));else if("IOP3"===w)a=h.pop(),i=h.pop(),r=h.pop(),h.push("?"===y.value?d(r?i:a,e,n):(o=e.ternaryOps[y.value])(v(r,n),v(i,n),v(a,n)));else if(w===c)if(y.value in e.functions)h.push(e.functions[y.value]);else if(y.value in e.unaryOps&&e.parser.isOperatorEnabled(y.value))h.push(e.unaryOps[y.value]);else{var x=n[y.value];if(void 0===x)throw new Error("undefined variable: "+y.value);h.push(x)}else if("IOP1"===w)r=h.pop(),h.push((o=e.unaryOps[y.value])(v(r,n)));else if("IFUNCALL"===w){for(l=y.value,p=[];l-- >0;)p.unshift(v(h.pop(),n));if(!(o=h.pop()).apply||!o.call)throw new Error(o+" is not a function");h.push(o.apply(void 0,p))}else if("IFUNDEF"===w)h.push(function(){for(var t=h.pop(),r=[],i=y.value;i-- >0;)r.unshift(h.pop());var a=h.pop(),o=function(){for(var i=Object.assign({},n),a=0,o=r.length;a<o;a++)i[r[a]]=arguments[a];return d(t,e,i)};return Object.defineProperty(o,"name",{value:a,writable:!1}),n[a]=o,o}());else if(w===u)h.push(m(y,e));else if("IEXPREVAL"===w)h.push(y);else if("IMEMBER"===w)r=h.pop(),h.push(r[y.value]);else if("IENDSTATEMENT"===w)h.pop();else{if("IARRAY"!==w)throw new Error("invalid Expression");for(l=y.value,p=[];l-- >0;)p.unshift(h.pop());h.push(p)}}if(h.length>1)throw new Error("invalid Expression (parity)");return 0===h[0]?0:v(h[0],n)}function m(t,e,n){return b(t)?t:{type:"IEXPREVAL",value:function(n){return d(t.value,e,n)}}}function b(t){return t&&"IEXPREVAL"===t.type}function v(t,e){return b(t)?t.value(e):t}function g(t,e){for(var n,r,i,a,o,p,l=[],h=0;h<t.length;h++){var f=t[h],d=f.type;if(d===s)"number"==typeof f.value&&f.value<0?l.push("("+f.value+")"):Array.isArray(f.value)?l.push("["+f.value.map(y).join(", ")+"]"):l.push(y(f.value));else if("IOP2"===d)r=l.pop(),n=l.pop(),a=f.value,l.push(e?"^"===a?"Math.pow("+n+", "+r+")":"and"===a?"(!!"+n+" && !!"+r+")":"or"===a?"(!!"+n+" || !!"+r+")":"||"===a?"(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))":"=="===a?"("+n+" === "+r+")":"!="===a?"("+n+" !== "+r+")":"["===a?n+"[("+r+") | 0]":"("+n+" "+a+" "+r+")":"["===a?n+"["+r+"]":"("+n+" "+a+" "+r+")");else if("IOP3"===d){if(i=l.pop(),r=l.pop(),n=l.pop(),"?"!==(a=f.value))throw new Error("invalid Expression");l.push("("+n+" ? "+r+" : "+i+")")}else if(d===c||"IVARNAME"===d)l.push(f.value);else if("IOP1"===d)n=l.pop(),l.push("-"===(a=f.value)||"+"===a?"("+a+n+")":e?"not"===a?"(!"+n+")":"!"===a?"fac("+n+")":a+"("+n+")":"!"===a?"("+n+"!)":"("+a+" "+n+")");else if("IFUNCALL"===d){for(p=f.value,o=[];p-- >0;)o.unshift(l.pop());a=l.pop(),l.push(a+"("+o.join(", ")+")")}else if("IFUNDEF"===d){for(r=l.pop(),p=f.value,o=[];p-- >0;)o.unshift(l.pop());n=l.pop(),l.push(e?"("+n+" = function("+o.join(", ")+") { return "+r+" })":"("+n+"("+o.join(", ")+") = "+r+")")}else if("IMEMBER"===d)n=l.pop(),l.push(n+"."+f.value);else if("IARRAY"===d){for(p=f.value,o=[];p-- >0;)o.unshift(l.pop());l.push("["+o.join(", ")+"]")}else if(d===u)l.push("("+g(f.value,e)+")");else if("IENDSTATEMENT"!==d)throw new Error("invalid Expression")}return l.length>1&&(l=e?[l.join(",")]:[l.join(";")]),String(l[0])}function y(t){return"string"==typeof t?JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):t}function w(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function x(t,e,n){for(var r=!!(n=n||{}).withMembers,i=null,a=0;a<t.length;a++){var o=t[a];o.type===c||"IVARNAME"===o.type?r||w(e,o.value)?null!==i?(w(e,i)||e.push(i),i=o.value):i=o.value:e.push(o.value):"IMEMBER"===o.type&&r&&null!==i?i+="."+o.value:o.type===u?x(o.value,e,n):null!==i&&(w(e,i)||e.push(i),i=null)}null===i||w(e,i)||e.push(i)}function T(t,e){this.tokens=t,this.parser=e,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.functions=e.functions}p.prototype.toString=function(){switch(this.type){case s:case"IOP1":case"IOP2":case"IOP3":case c:case"IVARNAME":case"IENDSTATEMENT":return this.value;case"IFUNCALL":return"CALL "+this.value;case"IFUNDEF":return"DEF "+this.value;case"IARRAY":return"ARRAY "+this.value;case"IMEMBER":return"."+this.value;default:return"Invalid Instruction"}},T.prototype.simplify=function(t){return new T(function t(e,n,r,i,a){for(var o,l,h,f=[],d=[],m=0;m<e.length;m++){var b=e[m],v=b.type;if(v===s||"IVARNAME"===v)Array.isArray(b.value)?f.push.apply(f,t(b.value.map((function(t){return new p(s,t)})).concat(new p("IARRAY",b.value.length)),n,r,i,a)):f.push(b);else if(v===c&&a.hasOwnProperty(b.value))b=new p(s,a[b.value]),f.push(b);else if("IOP2"===v&&f.length>1)l=f.pop(),o=f.pop(),b=new p(s,(0,r[b.value])(o.value,l.value)),f.push(b);else if("IOP3"===v&&f.length>2)h=f.pop(),l=f.pop(),o=f.pop(),"?"===b.value?f.push(o.value?l.value:h.value):(b=new p(s,(0,i[b.value])(o.value,l.value,h.value)),f.push(b));else if("IOP1"===v&&f.length>0)o=f.pop(),b=new p(s,(0,n[b.value])(o.value)),f.push(b);else if(v===u){for(;f.length>0;)d.push(f.shift());d.push(new p(u,t(b.value,n,r,i,a)))}else if("IMEMBER"===v&&f.length>0)o=f.pop(),f.push(new p(s,o.value[b.value]));else{for(;f.length>0;)d.push(f.shift());d.push(b)}}for(;f.length>0;)d.push(f.shift());return d}(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,t=t||{}),this.parser)},T.prototype.substitute=function(t,e){return e instanceof T||(e=this.parser.parse(String(e))),new T(function t(e,n,r){for(var i=[],a=0;a<e.length;a++){var o=e[a],s=o.type;if(s===c&&o.value===n)for(var d=0;d<r.tokens.length;d++){var m,b=r.tokens[d];m="IOP1"===b.type?l(b.value):"IOP2"===b.type?h(b.value):"IOP3"===b.type?f(b.value):new p(b.type,b.value),i.push(m)}else i.push(s===u?new p(u,t(o.value,n,r)):o)}return i}(this.tokens,t,e),this.parser)},T.prototype.evaluate=function(t){return d(this.tokens,this,t=t||{})},T.prototype.toString=function(){return g(this.tokens,!1)},T.prototype.symbols=function(t){var e=[];return x(this.tokens,e,t=t||{}),e},T.prototype.variables=function(t){var e=[];x(this.tokens,e,t=t||{});var n=this.functions;return e.filter((function(t){return!(t in n)}))},T.prototype.toJSFunction=function(t,e){var n=this,r=new Function(t,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+g(this.simplify(e).tokens,!0)+"; }");return function(){return r.apply(n,arguments)}};var E="TOP",k="TPAREN";function A(t,e,n){this.type=t,this.value=e,this.index=n}function S(t,e){this.pos=0,this.current=null,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.consts=t.consts,this.expression=e,this.savedPosition=0,this.savedCurrent=null,this.options=t.options,this.parser=t}A.prototype.toString=function(){return this.type+": "+this.value},S.prototype.newToken=function(t,e,n){return new A(t,e,null!=n?n:this.pos)},S.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},S.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},S.prototype.next=function(){return this.pos>=this.expression.length?this.newToken("TEOF","EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},S.prototype.isString=function(){var t=!1,e=this.pos,n=this.expression.charAt(e);if("'"===n||'"'===n)for(var r=this.expression.indexOf(n,e+1);r>=0&&this.pos<this.expression.length;){if(this.pos=r+1,"\\"!==this.expression.charAt(r-1)){var i=this.expression.substring(e+1,r);this.current=this.newToken("TSTRING",this.unescape(i),e),t=!0;break}r=this.expression.indexOf(n,r+1)}return t},S.prototype.isParen=function(){var t=this.expression.charAt(this.pos);return("("===t||")"===t)&&(this.current=this.newToken(k,t),this.pos++,!0)},S.prototype.isBracket=function(){var t=this.expression.charAt(this.pos);return!("["!==t&&"]"!==t||!this.isOperatorEnabled("[")||(this.current=this.newToken("TBRACKET",t),this.pos++,0))},S.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken("TCOMMA",","),this.pos++,!0)},S.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken("TSEMICOLON",";"),this.pos++,!0)},S.prototype.isConst=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&"."!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(r in this.consts)return this.current=this.newToken("TNUMBER",this.consts[r]),this.pos+=r.length,!0}return!1},S.prototype.isNamedOp=function(){for(var t=this.pos,e=t;e<this.expression.length;e++){var n=this.expression.charAt(e);if(n.toUpperCase()===n.toLowerCase()&&(e===this.pos||"_"!==n&&(n<"0"||n>"9")))break}if(e>t){var r=this.expression.substring(t,e);if(this.isOperatorEnabled(r)&&(r in this.binaryOps||r in this.unaryOps||r in this.ternaryOps))return this.current=this.newToken(E,r),this.pos+=r.length,!0}return!1},S.prototype.isName=function(){for(var t=this.pos,e=t,n=!1;e<this.expression.length;e++){var r=this.expression.charAt(e);if(r.toUpperCase()===r.toLowerCase()){if(e===this.pos&&("$"===r||"_"===r)){"_"===r&&(n=!0);continue}if(e===this.pos||!n||"_"!==r&&(r<"0"||r>"9"))break}else n=!0}if(n){var i=this.expression.substring(t,e);return this.current=this.newToken("TNAME",i),this.pos+=i.length,!0}return!1},S.prototype.isWhitespace=function(){for(var t=!1,e=this.expression.charAt(this.pos);!(" "!==e&&"\t"!==e&&"\n"!==e&&"\r"!==e||(t=!0,this.pos++,this.pos>=this.expression.length));)e=this.expression.charAt(this.pos);return t};var M=/^[0-9a-f]{4}$/i;function I(t,e,n){this.parser=t,this.tokens=e,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==n.allowMemberAccess}S.prototype.unescape=function(t){var e=t.indexOf("\\");if(e<0)return t;for(var n=t.substring(0,e);e>=0;){var r=t.charAt(++e);switch(r){case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\";break;case"/":n+="/";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"u":var i=t.substring(e+1,e+5);M.test(i)||this.parseError("Illegal escape sequence: \\u"+i),n+=String.fromCharCode(parseInt(i,16)),e+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+r+'"')}++e;var a=t.indexOf("\\",e);n+=t.substring(e,a<0?t.length:a),e=a}return n},S.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},S.prototype.isRadixInteger=function(){var t,e,n=this.pos;if(n>=this.expression.length-2||"0"!==this.expression.charAt(n))return!1;if(++n,"x"===this.expression.charAt(n))t=16,e=/^[0-9a-f]$/i,++n;else{if("b"!==this.expression.charAt(n))return!1;t=2,e=/^[01]$/i,++n}for(var r=!1,i=n;n<this.expression.length;){var a=this.expression.charAt(n);if(!e.test(a))break;n++,r=!0}return r&&(this.current=this.newToken("TNUMBER",parseInt(this.expression.substring(i,n),t)),this.pos=n),r},S.prototype.isNumber=function(){for(var t,e=!1,n=this.pos,r=n,i=n,a=!1,o=!1;n<this.expression.length&&((t=this.expression.charAt(n))>="0"&&t<="9"||!a&&"."===t);)"."===t?a=!0:o=!0,n++,e=o;if(e&&(i=n),"e"===t||"E"===t){n++;for(var s=!0,c=!1;n<this.expression.length;){if(t=this.expression.charAt(n),!s||"+"!==t&&"-"!==t){if(!(t>="0"&&t<="9"))break;c=!0,s=!1}else s=!1;n++}c||(n=i)}return e?(this.current=this.newToken("TNUMBER",parseFloat(this.expression.substring(r,n))),this.pos=n):this.pos=i,e},S.prototype.isOperator=function(){var t=this.pos,e=this.expression.charAt(this.pos);if("+"===e||"-"===e||"*"===e||"/"===e||"%"===e||"^"===e||"?"===e||":"===e||"."===e)this.current=this.newToken(E,e);else if("\u2219"===e||"\u2022"===e)this.current=this.newToken(E,"*");else if(">"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(E,">="),this.pos++):this.current=this.newToken(E,">");else if("<"===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(E,"<="),this.pos++):this.current=this.newToken(E,"<");else if("|"===e){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(E,"||"),this.pos++}else if("="===e)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(E,"=="),this.pos++):this.current=this.newToken(E,e);else{if("!"!==e)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(E,"!="),this.pos++):this.current=this.newToken(E,e)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=t,!1)},S.prototype.isOperatorEnabled=function(t){return this.parser.isOperatorEnabled(t)},S.prototype.getCoordinates=function(){var t,e=0,n=-1;do{e++,t=this.pos-n,n=this.expression.indexOf("\n",n+1)}while(n>=0&&n<this.pos);return{line:e,column:t}},S.prototype.parseError=function(t){var e=this.getCoordinates();throw new Error("parse error ["+e.line+":"+e.column+"]: "+t)},I.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},I.prototype.tokenMatches=function(t,e){return void 0===e||(Array.isArray(e)?w(e,t.value):"function"==typeof e?e(t):t.value===e)},I.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},I.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},I.prototype.accept=function(t,e){return!(this.nextToken.type!==t||!this.tokenMatches(this.nextToken,e)||(this.next(),0))},I.prototype.expect=function(t,e){if(!this.accept(t,e)){var n=this.tokens.getCoordinates();throw new Error("parse error ["+n.line+":"+n.column+"]: Expected "+(e||t))}},I.prototype.parseAtom=function(t){var e=this.tokens.unaryOps;if(this.accept("TNAME")||this.accept(E,(function(t){return t.value in e})))t.push(new p(c,this.current.value));else if(this.accept("TNUMBER"))t.push(new p(s,this.current.value));else if(this.accept("TSTRING"))t.push(new p(s,this.current.value));else if(this.accept(k,"("))this.parseExpression(t),this.expect(k,")");else{if(!this.accept("TBRACKET","["))throw new Error("unexpected "+this.nextToken);if(this.accept("TBRACKET","]"))t.push(new p("IARRAY",0));else{var n=this.parseArrayList(t);t.push(new p("IARRAY",n))}}},I.prototype.parseExpression=function(t){var e=[];this.parseUntilEndStatement(t,e)||(this.parseVariableAssignmentExpression(e),this.parseUntilEndStatement(t,e)||this.pushExpression(t,e))},I.prototype.pushExpression=function(t,e){for(var n=0,r=e.length;n<r;n++)t.push(e[n])},I.prototype.parseUntilEndStatement=function(t,e){return!!this.accept("TSEMICOLON")&&(!this.nextToken||"TEOF"===this.nextToken.type||this.nextToken.type===k&&")"===this.nextToken.value||e.push(new p("IENDSTATEMENT")),"TEOF"!==this.nextToken.type&&this.parseExpression(e),t.push(new p(u,e)),!0)},I.prototype.parseArrayList=function(t){for(var e=0;!this.accept("TBRACKET","]");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},I.prototype.parseVariableAssignmentExpression=function(t){for(this.parseConditionalExpression(t);this.accept(E,"=");){var e=t.pop(),n=[],r=t.length-1;if("IFUNCALL"!==e.type){if(e.type!==c&&"IMEMBER"!==e.type)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(n),t.push(new p("IVARNAME",e.value)),t.push(new p(u,n)),t.push(h("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var i=0,a=e.value+1;i<a;i++){var o=r-i;t[o].type===c&&(t[o]=new p("IVARNAME",t[o].value))}this.parseVariableAssignmentExpression(n),t.push(new p(u,n)),t.push(new p("IFUNDEF",e.value))}}},I.prototype.parseConditionalExpression=function(t){for(this.parseOrExpression(t);this.accept(E,"?");){var e=[],n=[];this.parseConditionalExpression(e),this.expect(E,":"),this.parseConditionalExpression(n),t.push(new p(u,e)),t.push(new p(u,n)),t.push(f("?"))}},I.prototype.parseOrExpression=function(t){for(this.parseAndExpression(t);this.accept(E,"or");){var e=[];this.parseAndExpression(e),t.push(new p(u,e)),t.push(h("or"))}},I.prototype.parseAndExpression=function(t){for(this.parseComparison(t);this.accept(E,"and");){var e=[];this.parseComparison(e),t.push(new p(u,e)),t.push(h("and"))}};var C=["==","!=","<","<=",">=",">","in"];I.prototype.parseComparison=function(t){for(this.parseAddSub(t);this.accept(E,C);){var e=this.current;this.parseAddSub(t),t.push(h(e.value))}};var B=["+","-","||"];I.prototype.parseAddSub=function(t){for(this.parseTerm(t);this.accept(E,B);){var e=this.current;this.parseTerm(t),t.push(h(e.value))}};var O=["*","/","%"];function N(t,e){return Number(t)+Number(e)}function D(t,e){return t-e}function F(t,e){return t*e}function R(t,e){return t/e}function P(t,e){return t%e}function V(t,e){return Array.isArray(t)&&Array.isArray(e)?t.concat(e):""+t+e}function j(t,e){return t===e}function L(t,e){return t!==e}function q(t,e){return t>e}function U(t,e){return t<e}function G(t,e){return t>=e}function $(t,e){return t<=e}function H(t,e){return Boolean(t&&e)}function X(t,e){return Boolean(t||e)}function K(t,e){return w(e,t)}function Y(t){return(Math.exp(t)-Math.exp(-t))/2}function _(t){return(Math.exp(t)+Math.exp(-t))/2}function Q(t){return t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function z(t){return t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function W(t){return Math.log(t+Math.sqrt(t*t-1))}function J(t){return Math.log((1+t)/(1-t))/2}function Z(t){return Math.log(t)*Math.LOG10E}function tt(t){return-t}function et(t){return!t}function nt(t){return t<0?Math.ceil(t):Math.floor(t)}function rt(t){return Math.random()*(t||1)}function it(t){return ot(t+1)}I.prototype.parseTerm=function(t){for(this.parseFactor(t);this.accept(E,O);){var e=this.current;this.parseFactor(t),t.push(h(e.value))}},I.prototype.parseFactor=function(t){var e=this.tokens.unaryOps;if(this.save(),this.accept(E,(function(t){return t.value in e}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===k&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(t);if("TSEMICOLON"===this.nextToken.type||"TCOMMA"===this.nextToken.type||"TEOF"===this.nextToken.type||this.nextToken.type===k&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(t)}var n=this.current;this.parseFactor(t),t.push(l(n.value))}else this.parseExponential(t)},I.prototype.parseExponential=function(t){for(this.parsePostfixExpression(t);this.accept(E,"^");)this.parseFactor(t),t.push(h("^"))},I.prototype.parsePostfixExpression=function(t){for(this.parseFunctionCall(t);this.accept(E,"!");)t.push(l("!"))},I.prototype.parseFunctionCall=function(t){var e=this.tokens.unaryOps;if(this.accept(E,(function(t){return t.value in e}))){var n=this.current;this.parseAtom(t),t.push(l(n.value))}else for(this.parseMemberExpression(t);this.accept(k,"(");)if(this.accept(k,")"))t.push(new p("IFUNCALL",0));else{var r=this.parseArgumentList(t);t.push(new p("IFUNCALL",r))}},I.prototype.parseArgumentList=function(t){for(var e=0;!this.accept(k,")");)for(this.parseExpression(t),++e;this.accept("TCOMMA");)this.parseExpression(t),++e;return e},I.prototype.parseMemberExpression=function(t){for(this.parseAtom(t);this.accept(E,".")||this.accept("TBRACKET","[");){var e=this.current;if("."===e.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect("TNAME"),t.push(new p("IMEMBER",this.current.value))}else{if("["!==e.value)throw new Error("unexpected symbol: "+e.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(t),this.expect("TBRACKET","]"),t.push(h("["))}}};var at=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function ot(t){var e,n;if(function(t){return isFinite(t)&&t===Math.round(t)}(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var r=t-2,i=t-1;r>1;)i*=r,r--;return 0===i&&(i=1),i}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*ot(1-t));if(t>=171.35)return 1/0;if(t>85){var a=t*t,o=a*t,s=o*t,c=s*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*a)-139/(51840*o)-571/(2488320*s)+163879/(209018880*c)+5246819/(75246796800*c*t))}--t,n=at[0];for(var u=1;u<at.length;++u)n+=at[u]/(t+u);return e=t+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*n}function st(t){return Array.isArray(t)?t.length:String(t).length}function ct(){for(var t=0,e=0,n=0;n<arguments.length;n++){var r,i=Math.abs(arguments[n]);e<i?(t=t*(r=e/i)*r+1,e=i):t+=i>0?(r=i/e)*r:i}return e===1/0?1/0:e*Math.sqrt(t)}function ut(t,e,n){return t?e:n}function pt(t,e){return void 0===e||0==+e?Math.round(t):(t=+t,e=-+e,isNaN(t)||"number"!=typeof e||e%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-e:-e)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+e:e))))}function lt(t,e,n){return n&&(n[t]=e),e}function ht(t,e){return t[0|e]}function ft(t){return 1===arguments.length&&Array.isArray(t)?Math.max.apply(Math,t):Math.max.apply(Math,arguments)}function dt(t){return 1===arguments.length&&Array.isArray(t)?Math.min.apply(Math,t):Math.min.apply(Math,arguments)}function mt(t,e){if("function"!=typeof t)throw new Error("First argument to map is not a function");if(!Array.isArray(e))throw new Error("Second argument to map is not an array");return e.map((function(e,n){return t(e,n)}))}function bt(t,e,n){if("function"!=typeof t)throw new Error("First argument to fold is not a function");if(!Array.isArray(n))throw new Error("Second argument to fold is not an array");return n.reduce((function(e,n,r){return t(e,n,r)}),e)}function vt(t,e){if("function"!=typeof t)throw new Error("First argument to filter is not a function");if(!Array.isArray(e))throw new Error("Second argument to filter is not an array");return e.filter((function(e,n){return t(e,n)}))}function gt(t,e){if(!Array.isArray(e)&&"string"!=typeof e)throw new Error("Second argument to indexOf is not a string or array");return e.indexOf(t)}function yt(t,e){if(!Array.isArray(e))throw new Error("Second argument to join is not an array");return e.join(t)}function wt(t){return(t>0)-(t<0)||+t}function xt(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function Tt(t){return Math.exp(t)-1}function Et(t){return Math.log(1+t)}function kt(t){return Math.log(t)/Math.LN2}function At(t){this.options=t||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Y,cosh:Math.cosh||_,tanh:Math.tanh||Q,asinh:Math.asinh||z,acosh:Math.acosh||W,atanh:Math.atanh||J,sqrt:Math.sqrt,cbrt:Math.cbrt||xt,log:Math.log,log2:Math.log2||kt,ln:Math.log,lg:Math.log10||Z,log10:Math.log10||Z,expm1:Math.expm1||Tt,log1p:Math.log1p||Et,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||nt,"-":tt,"+":Number,exp:Math.exp,not:et,length:st,"!":it,sign:Math.sign||wt},this.binaryOps={"+":N,"-":D,"*":F,"/":R,"%":P,"^":Math.pow,"||":V,"==":j,"!=":L,">":q,"<":U,">=":G,"<=":$,and:H,or:X,in:K,"=":lt,"[":ht},this.ternaryOps={"?":ut},this.functions={random:rt,fac:it,min:dt,max:ft,hypot:Math.hypot||ct,pyt:Math.hypot||ct,pow:Math.pow,atan2:Math.atan2,if:ut,gamma:ot,roundTo:pt,map:mt,fold:bt,filter:vt,indexOf:gt,join:yt},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}At.prototype.parse=function(t){var e=[],n=new I(this,new S(this,t),{allowMemberAccess:this.options.allowMemberAccess});return n.parseExpression(e),n.expect("TEOF","EOF"),new T(e,this)},At.prototype.evaluate=function(t,e){return this.parse(t).evaluate(e)};var St=new At;At.parse=function(t){return St.parse(t)},At.evaluate=function(t,e){return St.parse(t).evaluate(e)};var Mt={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};At.prototype.isOperatorEnabled=function(t){var e=function(t){return Mt.hasOwnProperty(t)?Mt[t]:t}(t),n=this.options.operators||{};return!(e in n)||!!n[e]};var It=i("LvDl"),Ct=i("2Vo4"),Bt=i("IPwQ"),Ot=i("fXoL"),Nt=i("bTqV"),Dt=i("NFeN"),Ft=i("ofXK"),Rt=i("kmnG"),Pt=i("qFsG"),Vt=i("d3UM"),jt=i("FKr1"),Lt=i("+0xr"),qt=i("A5z7"),Ut=i("sYmb");function Gt(t,e){if(1&t&&(Ot.Tb(0,"div",4),Ot.Tb(1,"div",5),Ot.Dc(2),Ot.fc(3,"translate"),Ot.Sb(),Ot.Tb(4,"label"),Ot.Dc(5),Ot.Sb(),Ot.Sb()),2&t){var n=Ot.ec();Ot.Bb(2),Ot.Ec(Ot.gc(3,2,"Description")),Ot.Bb(3),Ot.Ec(n.data.indicator.value.description?n.data.indicator.value.description.en:null)}}function $t(t,e){1&t&&(Ot.Tb(0,"div",4),Ot.Tb(1,"div",5),Ot.Dc(2),Ot.fc(3,"translate"),Ot.Sb(),Ot.Tb(4,"mat-form-field",6),Ot.Ob(5,"input",14),Ot.fc(6,"translate"),Ot.Tb(7,"mat-hint"),Ot.Tb(8,"mat-icon"),Ot.Dc(9,"info"),Ot.Sb(),Ot.Dc(10),Ot.fc(11,"translate"),Ot.Sb(),Ot.Sb(),Ot.Sb()),2&t&&(Ot.Bb(2),Ot.Ec(Ot.gc(3,3,"Name")),Ot.Bb(3),Ot.lc("placeholder",Ot.gc(6,5,"Name")),Ot.Bb(5),Ot.Fc("",Ot.gc(11,7,"Tooltip.BasicsEdition.Name")," "))}function Ht(t,e){if(1&t&&(Ot.Tb(0,"mat-option",15),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t){var n=e.$implicit;Ot.kc("value",n.value),Ot.Bb(1),Ot.Fc("",Ot.gc(2,2,n.display)," ")}}function Xt(t,e){1&t&&(Ot.Tb(0,"div",16),Ot.Tb(1,"mat-form-field",6),Ot.Ob(2,"input",17),Ot.fc(3,"translate"),Ot.Sb(),Ot.Sb()),2&t&&(Ot.Bb(2),Ot.lc("placeholder",Ot.gc(3,1,"Enum.Computation.fixed")))}function Kt(t,e){1&t&&(Ot.Tb(0,"th",30),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t&&(Ot.Bb(1),Ot.Ec(Ot.gc(2,1,"Parameter")))}function Yt(t,e){if(1&t&&(Ot.Tb(0,"span"),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t){var n=Ot.ec().$implicit,r=Ot.ec(2);Ot.Bb(1),Ot.Ec(Ot.gc(2,1,"copy"!==r.type?"Enum.Formula."+n.symbol:"Enum.Formula.copied"))}}function _t(t,e){if(1&t&&(Ot.Tb(0,"span"),Ot.Dc(1),Ot.Sb()),2&t){var n=Ot.ec().$implicit;Ot.Bb(1),Ot.Ec(n.symbol)}}function Qt(t,e){if(1&t&&(Ot.Tb(0,"td",31),Ot.Bc(1,Yt,3,3,"span",32),Ot.Bc(2,_t,2,1,"span",32),Ot.Sb()),2&t){var n=Ot.ec(2);Ot.Bb(1),Ot.kc("ngIf","formula"!==n.type),Ot.Bb(1),Ot.kc("ngIf","formula"===n.type)}}function zt(t,e){1&t&&Ot.Ob(0,"td",33)}function Wt(t,e){1&t&&(Ot.Tb(0,"th",30),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t&&(Ot.Bb(1),Ot.Ec(Ot.gc(2,1,"Variable")))}function Jt(t,e){if(1&t&&(Ot.Tb(0,"mat-option",15),Ot.Dc(1),Ot.Sb()),2&t){var n=e.$implicit;Ot.kc("value",n.id),Ot.Bb(1),Ot.Fc(" ",n.name," ")}}function Zt(t,e){if(1&t&&(Ot.Tb(0,"mat-optgroup",37),Ot.Bc(1,Jt,2,2,"mat-option",10),Ot.Sb()),2&t){var n=e.$implicit;Ot.kc("label",n.name),Ot.Bb(1),Ot.kc("ngForOf",n.elements)}}function te(t,e){if(1&t){var n=Ot.Ub();Ot.Tb(0,"td",34),Ot.Tb(1,"mat-form-field",6),Ot.Tb(2,"mat-select",35),Ot.ac("selectionChange",(function(t){Ot.sc(n);var r=e.$implicit;return Ot.ec(2).onVariableSelected(t,r)})),Ot.fc(3,"translate"),Ot.Bc(4,Zt,2,2,"mat-optgroup",36),Ot.Sb(),Ot.Sb(),Ot.Sb()}if(2&t){var r=e.$implicit,i=Ot.ec(2);Ot.kc("formGroupName",r.symbol),Ot.Bb(2),Ot.lc("placeholder",Ot.gc(3,3,"Variable")),Ot.Bb(2),Ot.kc("ngForOf",i.data.forms)}}function ee(t,e){1&t&&(Ot.Tb(0,"td",33),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t&&(Ot.Bb(1),Ot.Ec(Ot.gc(2,1,"Help.Variable")))}function ne(t,e){1&t&&(Ot.Tb(0,"th",30),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t&&(Ot.Bb(1),Ot.Ec(Ot.gc(2,1,"Disaggregations")))}function re(t,e){if(1&t){var n=Ot.Ub();Ot.Tb(0,"mat-chip",42),Ot.ac("removed",(function(){Ot.sc(n);var t=e.$implicit,r=Ot.ec().$implicit,i=Ot.ec(2).$implicit;return Ot.ec(2).onPartitionElementRemoved(i.symbol,r.id,t.id)})),Ot.Dc(1),Ot.Tb(2,"mat-icon",43),Ot.Dc(3,"cancel"),Ot.Sb(),Ot.Sb()}if(2&t){var r=e.$implicit;Ot.kc("removable",!0),Ot.Bb(1),Ot.Fc(" ",r.name," ")}}function ie(t,e){if(1&t&&(Ot.Tb(0,"mat-option",15),Ot.Dc(1),Ot.Sb()),2&t){var n=e.$implicit;Ot.kc("value",n),Ot.Bb(1),Ot.Fc("",n.name," ")}}function ae(t,e){if(1&t&&(Ot.Rb(0,39),Ot.Dc(1),Ot.Tb(2,"mat-form-field",6),Ot.Tb(3,"mat-select",40),Ot.fc(4,"translate"),Ot.Tb(5,"mat-select-trigger"),Ot.Tb(6,"mat-chip-list"),Ot.Bc(7,re,4,2,"mat-chip",41),Ot.Sb(),Ot.Sb(),Ot.Bc(8,ie,2,2,"mat-option",10),Ot.Sb(),Ot.Sb(),Ot.Ob(9,"br"),Ot.Qb()),2&t){var n=e.$implicit,r=Ot.ec(2).$implicit,i=Ot.ec(2);Ot.Bb(1),Ot.Fc(" ",n.name," "),Ot.Bb(2),Ot.lc("placeholder",Ot.gc(4,5,"partitionElement")),Ot.kc("formControlName",n.id),Ot.Bb(4),Ot.kc("ngForOf",i.getPartitions(r.symbol,n.id)),Ot.Bb(1),Ot.kc("ngForOf",n.elements)}}function oe(t,e){if(1&t&&(Ot.Tb(0,"div"),Ot.Bc(1,ae,10,7,"ng-container",38),Ot.Sb()),2&t){var n=Ot.ec().$implicit;Ot.Bb(1),Ot.kc("ngForOf",n.filter.partitions)}}function se(t,e){if(1&t&&(Ot.Tb(0,"td",34),Ot.Bc(1,oe,2,1,"div",32),Ot.Sb()),2&t){var n=e.$implicit;Ot.kc("formGroupName",n.symbol),Ot.Bb(1),Ot.kc("ngIf",n.filter)}}function ce(t,e){1&t&&(Ot.Tb(0,"td",33),Ot.Dc(1),Ot.fc(2,"translate"),Ot.Sb()),2&t&&(Ot.Bb(1),Ot.Ec(Ot.gc(2,1,"Help.Partition")))}function ue(t,e){if(1&t){var n=Ot.Ub();Ot.Tb(0,"td",30),Ot.Tb(1,"mat-form-field",6),Ot.Tb(2,"input",44),Ot.ac("change",(function(){return Ot.sc(n),Ot.ec(2).onFormulaChange()})),Ot.fc(3,"translate"),Ot.Sb(),Ot.Sb(),Ot.Sb()}if(2&t){var r=Ot.ec(2);Ot.Cb("colspan",r.displayedColumns.length),Ot.Bb(2),Ot.lc("placeholder",Ot.gc(3,3,"Formula")),Ot.kc("readonly","formula"!==r.type)}}function pe(t,e){1&t&&Ot.Ob(0,"tr",45)}function le(t,e){1&t&&Ot.Ob(0,"tr",45)}function he(t,e){1&t&&Ot.Ob(0,"tr",46)}function fe(t,e){1&t&&Ot.Ob(0,"tr",47)}var de=function(){return["formula"]};function me(t,e){if(1&t&&(Ot.Tb(0,"div",16),Ot.Ob(1,"div",5),Ot.Tb(2,"table",18),Ot.Rb(3,19),Ot.Bc(4,Kt,3,3,"th",20),Ot.Bc(5,Qt,3,2,"td",21),Ot.Bc(6,zt,1,0,"td",22),Ot.Qb(),Ot.Rb(7,23),Ot.Bc(8,Wt,3,3,"th",20),Ot.Bc(9,te,5,5,"td",24),Ot.Bc(10,ee,3,3,"td",22),Ot.Qb(),Ot.Rb(11,25),Ot.Bc(12,ne,3,3,"th",20),Ot.Bc(13,se,2,2,"td",24),Ot.Bc(14,ce,3,3,"td",22),Ot.Qb(),Ot.Rb(15,26),Ot.Bc(16,ue,4,5,"td",20),Ot.Qb(),Ot.Bc(17,pe,1,0,"tr",27),Ot.Bc(18,le,1,0,"tr",27),Ot.Bc(19,he,1,0,"tr",28),Ot.Bc(20,fe,1,0,"tr",29),Ot.Sb(),Ot.Sb()),2&t){var n=Ot.ec();Ot.Bb(2),Ot.kc("dataSource",n.dataSource),Ot.Bb(15),Ot.kc("matHeaderRowDef",n.displayedColumns),Ot.Bb(1),Ot.kc("matHeaderRowDef",Ot.nc(5,de)),Ot.Bb(1),Ot.kc("matRowDefColumns",n.displayedColumns),Ot.Bb(1),Ot.kc("matFooterRowDef",n.displayedColumns)}}var be,ve=((be=function(){function e(n,r,i){t(this,e),this.fb=n,this.dialogRef=r,this.data=i,this.displayedColumns=["parameter","variable","disaggregations"],this.dataSource=new Ct.a([]),this.dataChanged=!1,this.computationTypes=[{value:"unavailable",display:"Enum.Computation.unavailable"},{value:"fixed",display:"Enum.Computation.fixed"},{value:"copy",display:"Enum.Computation.copy"},{value:"percentage",display:"Enum.Computation.percentage"},{value:"permille",display:"Enum.Computation.permille"},{value:"formula",display:"Enum.Computation.formula"}]}return n(e,[{key:"ngOnInit",value:function(){this.loadData(),this.initValue=It.cloneDeep(this.data.indicator),this.initDataSource=this.dataSource.getValue()}},{key:"onSubmit",value:function(){this.dialogRef.close({indicator:this.data.indicator})}},{key:"loadData",value:function(){var t=this;this.parser=new At,this.parser.consts={};try{this.symbols=this.parser.parse(this.data.indicator.value.computation.formula).variables();var e=[];this.symbols.forEach((function(t){e.push({symbol:t})})),this.dataSource.next(e)}catch(i){this.symbols=[]}var n=this.data.indicator.value.computation.parameters;if(n){var r=this.dataSource.getValue();r.forEach((function(e){e.filter=t.lookForVariable(t.data.forms,n[""+e.symbol].elementId)})),this.symbols.forEach((function(e){r.filter((function(t){return t.symbol===e}))[0].filter.partitions.forEach((function(n){var r=t.data.indicator.controls.computation.get("parameters").get(""+e).get("filter"),i=r.get(""+n.id).value,o=[],s=[];"string"!=typeof i[0]&&i.forEach((function(t){return s.push(t.id)})),s.length>0&&(i=s),n.elements.forEach((function(t){-1!==i.indexOf(t.id)&&o.push(t)})),r.setControl(""+n.id,new a.g(o))}))})),this.dataSource.next(r)}this.dataChanged=!1,this.data.indicator.valueChanges.subscribe((function(){t.dataChanged=!0}))}},{key:"onReset",value:function(){this.data.indicator=It.cloneDeep(this.initValue),this.dataSource.next(this.initDataSource),this.loadData()}},{key:"onTypeChange",value:function(t){var e=this.data.indicator.controls.computation;"fixed"===t.value&&isNaN(e.value.formula)?e.controls.formula.setValue("0"):"copy"===t.value?e.controls.formula.setValue(Bt.a):"percentage"===t.value?e.controls.formula.setValue(Bt.b):"permille"===t.value?e.controls.formula.setValue(Bt.c):"unavailable"===t.value&&e.controls.formula.setValue(null),this.onFormulaChange()}},{key:"onFormulaChange",value:function(){var t=this,e=[];try{e=this.parser.parse(this.data.indicator.get("computation").value.formula).variables()}catch(i){e=[]}this.symbols=e;var n=new a.j({});this.symbols.forEach((function(e){n.addControl(""+e,t.fb.group({elementId:["",a.x.required],filter:t.fb.group({})}))})),this.data.indicator.get("computation").setControl("parameters",n);var r=[];this.symbols.forEach((function(t){r.push({symbol:t})})),this.dataSource.next(r)}},{key:"onVariableSelected",value:function(t,e){var n=this,r=this.dataSource.getValue(),i=this.fb.group({});r.forEach((function(r){r.symbol===e.symbol&&(r.filter=n.lookForVariable(n.data.forms,t.value),r.filter.partitions.forEach((function(t){i.addControl(""+t.id,new a.g([]))}))),n.data.indicator.controls.computation.get("parameters").get(""+e.symbol).setControl("filter",i)})),this.dataSource.next(r)}},{key:"lookForVariable",value:function(t,e){var n;return t.forEach((function(t){var r=t.elements.filter((function(t){return t.id===e}))[0];r&&(n=r)})),n}},{key:"getPartitions",value:function(t,e){return this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter").get(""+e).value}},{key:"onPartitionElementRemoved",value:function(t,e,n){var r=this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter").get(""+e).value;this.data.indicator.controls.computation.get("parameters").get(""+t).get("filter").get(""+e).setValue(r.filter((function(t){return t.id!==n})))}},{key:"type",get:function(){return this.data.indicator.value.type}}]),e}()).\u0275fac=function(t){return new(t||be)(Ot.Nb(a.f),Ot.Nb(o.g),Ot.Nb(o.a))},be.\u0275cmp=Ot.Hb({type:be,selectors:[["app-indicator-modal"]],decls:58,vars:41,consts:[["mat-icon-button","","mat-dialog-close","",1,"dialog-close"],["mat-dialog-title",""],[1,"mdm-dialog",3,"formGroup"],["class","mdm-form-group",4,"ngIf"],[1,"mdm-form-group"],[1,"mdm-form-label"],["appearance","outline",1,"mdm-form-field"],["matInput","","type","number","formControlName","baseline",3,"placeholder"],["matInput","","type","number","formControlName","target",3,"placeholder"],["formControlName","type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["class","mdm-form-group","formGroupName","computation",4,"ngIf"],["align","end"],["mat-stroked-button","",1,"mdm-button",3,"disabled","click"],["matInput","","formControlName","display",3,"placeholder"],[3,"value"],["formGroupName","computation",1,"mdm-form-group"],["matInput","","type","string","formControlName","formula",3,"placeholder"],["mat-table","",1,"mdm-table",3,"dataSource"],["matColumnDef","parameter"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","variable","formGroupName","parameters"],["mat-cell","",3,"formGroupName",4,"matCellDef"],["matColumnDef","disaggregations","formGroupName","parameters"],["matColumnDef","formula"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-footer-cell",""],["mat-cell","",3,"formGroupName"],["formControlName","elementId",3,"placeholder","selectionChange"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],["formGroupName","filter",4,"ngFor","ngForOf"],["formGroupName","filter"],["multiple","",3,"formControlName","placeholder"],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"removable","removed"],["matChipRemove",""],["matInput","","formControlName","formula",3,"placeholder","readonly","change"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(Ot.Tb(0,"button",0),Ot.Tb(1,"mat-icon"),Ot.Dc(2,"close"),Ot.Sb(),Ot.Sb(),Ot.Tb(3,"h2",1),Ot.Dc(4),Ot.fc(5,"translate"),Ot.Sb(),Ot.Tb(6,"mat-dialog-content",2),Ot.Bc(7,Gt,6,4,"div",3),Ot.Bc(8,$t,12,9,"div",3),Ot.Tb(9,"div",4),Ot.Tb(10,"div",5),Ot.Dc(11),Ot.fc(12,"translate"),Ot.Sb(),Ot.Tb(13,"mat-form-field",6),Ot.Ob(14,"input",7),Ot.fc(15,"translate"),Ot.Tb(16,"mat-hint"),Ot.Tb(17,"mat-icon"),Ot.Dc(18,"info"),Ot.Sb(),Ot.Dc(19),Ot.fc(20,"translate"),Ot.Sb(),Ot.Sb(),Ot.Sb(),Ot.Tb(21,"div",4),Ot.Tb(22,"div",5),Ot.Dc(23),Ot.fc(24,"translate"),Ot.Sb(),Ot.Tb(25,"mat-form-field",6),Ot.Ob(26,"input",8),Ot.fc(27,"translate"),Ot.Tb(28,"mat-hint"),Ot.Tb(29,"mat-icon"),Ot.Dc(30,"info"),Ot.Sb(),Ot.Dc(31),Ot.fc(32,"translate"),Ot.Sb(),Ot.Sb(),Ot.Sb(),Ot.Tb(33,"div",4),Ot.Tb(34,"div",5),Ot.Dc(35),Ot.fc(36,"translate"),Ot.Sb(),Ot.Tb(37,"mat-form-field",6),Ot.Tb(38,"mat-select",9),Ot.ac("selectionChange",(function(t){return e.onTypeChange(t)})),Ot.Bc(39,Ht,3,4,"mat-option",10),Ot.Sb(),Ot.Tb(40,"mat-hint"),Ot.Tb(41,"mat-icon"),Ot.Dc(42,"info"),Ot.Sb(),Ot.Dc(43),Ot.fc(44,"translate"),Ot.Sb(),Ot.Sb(),Ot.Sb(),Ot.Bc(45,Xt,4,3,"div",11),Ot.Bc(46,me,21,6,"div",11),Ot.Sb(),Ot.Tb(47,"mat-dialog-actions",12),Ot.Tb(48,"button",13),Ot.ac("click",(function(){return e.onSubmit()})),Ot.Tb(49,"mat-icon"),Ot.Dc(50,"save"),Ot.Sb(),Ot.Dc(51),Ot.fc(52,"translate"),Ot.Sb(),Ot.Tb(53,"button",13),Ot.ac("click",(function(){return e.onReset()})),Ot.Tb(54,"mat-icon"),Ot.Dc(55,"undo"),Ot.Sb(),Ot.Dc(56),Ot.fc(57,"translate"),Ot.Sb(),Ot.Sb()),2&t&&(Ot.Bb(4),Ot.Ec(Ot.gc(5,19,"IndicatorEdition")),Ot.Bb(2),Ot.kc("formGroup",e.data.indicator),Ot.Bb(1),Ot.kc("ngIf",e.data.indicator.value.crossCutting),Ot.Bb(1),Ot.kc("ngIf",!e.data.indicator.value.crossCutting),Ot.Bb(3),Ot.Ec(Ot.gc(12,21,"Baseline")),Ot.Bb(3),Ot.lc("placeholder",Ot.gc(15,23,"Baseline")),Ot.Bb(5),Ot.Fc("",Ot.gc(20,25,"Baseline-Hint")," "),Ot.Bb(4),Ot.Ec(Ot.gc(24,27,"Target")),Ot.Bb(3),Ot.lc("placeholder",Ot.gc(27,29,"Target")),Ot.Bb(5),Ot.Fc("",Ot.gc(32,31,"Target-Hint")," "),Ot.Bb(4),Ot.Ec(Ot.gc(36,33,"Computation")),Ot.Bb(4),Ot.kc("ngForOf",e.computationTypes),Ot.Bb(4),Ot.Fc("",Ot.gc(44,35,"Computation-Hint")," "),Ot.Bb(2),Ot.kc("ngIf","fixed"===e.type),Ot.Bb(1),Ot.kc("ngIf","unavailable"!==e.type&&"fixed"!==e.type),Ot.Bb(2),Ot.kc("disabled",e.data.indicator.invalid||!e.dataChanged),Ot.Bb(3),Ot.Fc("",Ot.gc(52,37,"ApplyChanges")," "),Ot.Bb(2),Ot.kc("disabled",!e.dataChanged),Ot.Bb(3),Ot.Fc("",Ot.gc(57,39,"ResetChanges")," "))},directives:[Nt.a,o.d,Dt.a,o.h,o.e,a.s,a.k,Ft.l,Rt.b,Pt.b,a.v,a.c,a.r,a.i,Rt.e,Vt.a,Ft.k,o.c,jt.m,a.l,Lt.n,Lt.c,Lt.i,Lt.b,Lt.e,Lt.k,Lt.m,Lt.g,Lt.h,Lt.a,Lt.d,jt.l,Vt.c,qt.b,qt.a,qt.c,Lt.j,Lt.l,Lt.f],pipes:[Ut.c],styles:[""]}),be)},Wp6s:function(e,n,r){"use strict";r.d(n,"a",(function(){return b})),r.d(n,"b",(function(){return f})),r.d(n,"c",(function(){return m})),r.d(n,"d",(function(){return l})),r.d(n,"e",(function(){return v})),r.d(n,"f",(function(){return d})),r.d(n,"g",(function(){return g})),r.d(n,"h",(function(){return h}));var i=r("R1ws"),a=r("FKr1"),o=r("fXoL"),s=["*",[["mat-card-footer"]]],c=["*","mat-card-footer"],u=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],p=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],l=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Ib({type:e,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),e}(),h=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Ib({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),e}(),f=function(){var e=function e(){t(this,e),this.align="start"};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Ib({type:e,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,e){2&t&&o.Fb("mat-card-actions-align-end","end"===e.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),e}(),d=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Ib({type:e,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),e}(),m=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.Ib({type:e,selectors:[["","mat-card-avatar",""],["","matCardAvatar",""]],hostAttrs:[1,"mat-card-avatar"]}),e}(),b=function(){var e=function e(n){t(this,e),this._animationMode=n};return e.\u0275fac=function(t){return new(t||e)(o.Nb(i.a,8))},e.\u0275cmp=o.Hb({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,e){2&t&&o.Fb("_mat-animation-noopable","NoopAnimations"===e._animationMode)},exportAs:["matCard"],ngContentSelectors:c,decls:2,vars:0,template:function(t,e){1&t&&(o.jc(s),o.ic(0),o.ic(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),e}(),v=function(){var e=function e(){t(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Hb({type:e,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:p,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,e){1&t&&(o.jc(u),o.ic(0),o.Tb(1,"div",0),o.ic(2,1),o.Sb(),o.ic(3,2))},encapsulation:2,changeDetection:0}),e}(),g=function(){var e=function e(){t(this,e)};return e.\u0275mod=o.Lb({type:e}),e.\u0275inj=o.Kb({factory:function(t){return new(t||e)},imports:[[a.h],a.h]}),e}()},XEzf:function(e,r,i){"use strict";i.d(r,"a",(function(){return b}));var a=i("fXoL"),o=i("Wp6s"),s=i("ofXK"),c=i("bTqV"),u=i("NFeN"),p=i("STbY"),l=i("sYmb");function h(t,e){if(1&t&&(a.Tb(0,"div",2),a.Tb(1,"div",3),a.Tb(2,"b"),a.Dc(3),a.fc(4,"translate"),a.Sb(),a.Dc(5),a.Sb(),a.Sb()),2&t){var n=a.ec();a.Bb(3),a.Fc("",a.gc(4,2,"Description"),": "),a.Bb(2),a.Ec(n.extraIndicator.description?n.extraIndicator.description.en:null)}}function f(t,e){1&t&&(a.Tb(0,"span",12),a.Dc(1),a.fc(2,"translate"),a.Tb(3,"mat-icon"),a.Dc(4,"link"),a.Sb(),a.Sb()),2&t&&(a.Bb(1),a.Fc("",a.gc(2,1,"Valid")," "))}function d(t,e){1&t&&(a.Tb(0,"span",13),a.Dc(1),a.fc(2,"translate"),a.Tb(3,"mat-icon"),a.Dc(4,"link_off"),a.Sb(),a.Sb()),2&t&&(a.Bb(1),a.Fc("",a.gc(2,1,"Invalid")," "))}function m(t,e){if(1&t&&(a.Tb(0,"button",14),a.Tb(1,"mat-icon"),a.Dc(2,"expand_more"),a.Sb(),a.Sb()),2&t){a.ec();var n=a.qc(32);a.kc("matMenuTriggerFor",n)}}var b=function(){var e=function(){function e(){t(this,e),this.deletable=!0,this.edit=new a.o,this.delete=new a.o}return n(e,[{key:"ngOnInit",value:function(){}},{key:"onEdit",value:function(){this.edit.emit()}},{key:"onDelete",value:function(){this.delete.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Hb({type:e,selectors:[["app-extra-indicator"]],inputs:{deletable:"deletable",extraIndicator:"extraIndicator"},outputs:{edit:"edit",delete:"delete"},decls:39,vars:22,consts:[[1,"card-header"],["class","card-info",4,"ngIf"],[1,"card-info"],[1,"card-info-value"],["class","computation valid",4,"ngIf","ngIfElse"],["elseBlock",""],["align","end",1,"mdm-button-group"],["mat-stroked-button","",1,"mdm-button","small-button",3,"click"],["svgIcon","edit"],["mat-stroked-button","","mat-icon-button","","class","mdm-button small-button",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"computation","valid"],[1,"computation","invalid"],["mat-stroked-button","","mat-icon-button","",1,"mdm-button","small-button",3,"matMenuTriggerFor"]],template:function(t,e){if(1&t&&(a.Tb(0,"mat-card"),a.Tb(1,"mat-card-header",0),a.Dc(2),a.Sb(),a.Tb(3,"mat-card-content"),a.Bc(4,h,6,4,"div",1),a.Tb(5,"div",2),a.Tb(6,"div",3),a.Tb(7,"b"),a.Dc(8),a.fc(9,"translate"),a.Sb(),a.Dc(10),a.Sb(),a.Sb(),a.Tb(11,"div",2),a.Tb(12,"div",3),a.Tb(13,"b"),a.Dc(14),a.fc(15,"translate"),a.Sb(),a.Dc(16),a.Sb(),a.Sb(),a.Tb(17,"div",2),a.Tb(18,"div",3),a.Tb(19,"b"),a.Dc(20),a.fc(21,"translate"),a.Sb(),a.Bc(22,f,5,3,"span",4),a.Bc(23,d,5,3,"ng-template",null,5,a.Cc),a.Sb(),a.Sb(),a.Sb(),a.Tb(25,"mat-card-actions",6),a.Tb(26,"button",7),a.ac("click",(function(){return e.onEdit()})),a.Ob(27,"mat-icon",8),a.Dc(28),a.fc(29,"translate"),a.Sb(),a.Bc(30,m,3,1,"button",9),a.Sb(),a.Sb(),a.Tb(31,"mat-menu",null,10),a.Tb(33,"button",11),a.ac("click",(function(){return e.onDelete()})),a.Tb(34,"mat-icon"),a.Dc(35,"delete"),a.Sb(),a.Tb(36,"span"),a.Dc(37),a.fc(38,"translate"),a.Sb(),a.Sb(),a.Sb()),2&t){var n=a.qc(24);a.Bb(2),a.Ec(e.extraIndicator.display),a.Bb(2),a.kc("ngIf",e.extraIndicator.crossCutting),a.Bb(4),a.Fc("",a.gc(9,12,"Baseline"),": "),a.Bb(2),a.Ec(e.extraIndicator.baseline?e.extraIndicator.baseline:"?"),a.Bb(4),a.Fc("",a.gc(15,14,"Target"),": "),a.Bb(2),a.Ec(e.extraIndicator.target?e.extraIndicator.target:"?"),a.Bb(4),a.Fc("",a.gc(21,16,"Computation"),": "),a.Bb(2),a.kc("ngIf",e.extraIndicator.computation)("ngIfElse",n),a.Bb(6),a.Ec(a.gc(29,18,"Edit")),a.Bb(2),a.kc("ngIf",e.deletable),a.Bb(7),a.Ec(a.gc(38,20,"Delete"))}},directives:[o.a,o.e,o.d,s.l,o.b,c.a,u.a,p.d,p.a,p.c],pipes:[l.c],styles:[""]}),e}()},YjUb:function(e,n,r){"use strict";r.d(n,"a",(function(){return h}));var i=r("ofXK"),a=r("sYmb"),o=r("Wp6s"),s=r("bTqV"),c=r("NFeN"),u=r("tyNb"),p=r("STbY"),l=r("fXoL"),h=function(){var e=function e(){t(this,e)};return e.\u0275mod=l.Lb({type:e}),e.\u0275inj=l.Kb({factory:function(t){return new(t||e)},imports:[[i.c,a.b,o.g,s.b,p.b,u.f,c.b]]}),e}()},hPXr:function(e,r,i){"use strict";i.d(r,"a",(function(){return h}));var a=i("3Pt+"),o=i("LvDl"),s=i("X4i7"),c=i("Ub+A"),u=i("/AVH"),p=i("IPwQ"),l=i("FNW4"),h=function(){function e(){t(this,e)}return n(e,null,[{key:"newPurpose",value:function(t){var e=this;return t||(t=new c.a),new a.j({assumptions:new a.g(t.assumptions,a.x.required),description:new a.g(t.description,a.x.required),outputs:new a.d(t.outputs.map((function(t){return e.newOutput(t)}))),indicators:new a.d(t.indicators.map((function(t){return e.newIndicator(t)})))})}},{key:"newOutput",value:function(t){var e=this;return t||(t=new s.a),new a.j({assumptions:new a.g(t.assumptions,a.x.required),description:new a.g(t.description,a.x.required),activities:new a.d(t.activities.map((function(t){return e.newActivity(t)}))),indicators:new a.d(t.indicators.map((function(t){return e.newIndicator(t)})))})}},{key:"newActivity",value:function(t){var e=this;return t||(t=new u.a),new a.j({description:new a.g(t.description,a.x.required),indicators:new a.d(t.indicators.map((function(t){return e.newIndicator(t)})))})}},{key:"newIndicator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new p.d(t),r=new a.j({});return n.computation&&Object(o.forEach)(n.computation.parameters,(function(t,e){var n=new a.j({});Object(o.forEach)(t.filter,(function(t,e){n.addControl(""+e,new a.g(t))})),r.addControl(""+e,new a.j({elementId:new a.g(t.elementId,a.x.required),filter:n}))})),new a.j(e?{crossCutting:new a.g(!0,a.x.required),id:new a.g(n.id,a.x.required),description:n.description?new a.j({en:new a.g(n.description.en),es:new a.g(n.description.es),fr:new a.g(n.description.fr)}):new a.g(null),display:new a.g(n.display),baseline:new a.g(n.baseline,a.x.required),target:new a.g(n.target,a.x.required),computation:new a.j({formula:new a.g(n.computation?n.computation.formula:null),parameters:n.computation?o.cloneDeep(r):new a.j({})}),type:new a.g(n.type)}:{display:new a.g(n.display,a.x.required),baseline:new a.g(n.baseline,a.x.required),target:new a.g(n.target,a.x.required),computation:new a.j({formula:new a.g(n.computation?n.computation.formula:null),parameters:n.computation?o.cloneDeep(r):new a.j({})}),type:new a.g(n.type)})}},{key:"newTheme",value:function(t){return t||(t=new l.a),new a.j({id:new a.g(t.id,a.x.required),type:new a.g(t.type,a.x.required),name:new a.g(t.name,a.x.required),shortName:new a.g(t.shortName,a.x.required),rev:new a.g(t.rev,a.x.required)})}},{key:"newIndicatorGroup",value:function(t){var e=this;return t||(t={theme:new l.a,indicators:[]}),new a.j({theme:this.newTheme(t.theme),indicators:new a.d(t.indicators.map((function(t){return e.newIndicator(t,!0)})))})}}]),e}()}}])}();
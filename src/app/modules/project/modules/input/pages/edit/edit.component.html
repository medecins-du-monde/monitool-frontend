<div class="mdm-title">{{ 'GeneralInformations' | translate }}</div>
<div class="mdm-section">
    <div class="info">
        <b class="info-title">{{ 'Name' | translate }}</b>
        <div class="info-value">{{ this.form ? this.form.name : '' }}</div>
    </div>
    <div class="info">
        <b class="info-title">{{ 'CollectionSites' | translate }}</b>
        <div class="info-value">{{ this.site ? this.site.name : '' }}</div>
    </div>
    <div class="info">
        <b class="info-title">{{ 'CoveredPeriod' | translate }}</b>
        <div class="info-value">{{ this.timeSlot ? this.timeSlot.humanizeValue(this.currentLang) : '' }} ({{ this.firstDate }} - {{ this.lastDate }})</div>
    </div>
</div>


<div class="title">
    <button *ngIf="previousInput" mat-stroked-button class="mdm-button small-button fill-button" (click)="fillWithPreviousData()">
        <mat-icon>edit</mat-icon>
        Fill with data from the previous entry
    </button>
    <div class="mdm-title">
        {{ 'Data' | translate }}
    </div>
    
</div>

<div *ngIf="inputForm && tables" [formGroup]="inputForm.get('values')">
    <div class="mdm-section" *ngFor="let table of tables; let k = index" >
        <p>{{ form.elements[k].name }}</p>
        <table mat-table [dataSource]="table.value" class="mdm-table input-table" [formArrayName]="table.id">
            <ng-container *ngFor="let column of table.displayedColumns; let j = index" matColumnDef="{{ column }}">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <td mat-cell *matCellDef="let element; let i = index">
                    <div *ngIf="isInputCell(k, i, j) !== false; else elseBlock">
                        <mat-form-field appearance="outline" class="mdm-form-field">
                            <input matInput [formControl]="inputForm.get('values').get(table.id)['controls'][isInputCell(k, i, j)]" />
                        </mat-form-field>
                    </div>
                    <ng-template #elseBlock>
                        {{ element[column] }}
                    </ng-template>
                </td>
            </ng-container>
            
            <tr mat-header-row *matHeaderRowDef="table.displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: table.displayedColumns;"></tr>
        </table>
    </div>
</div>
<div>
    <button (click)="saveInput()">SAVE</button>
</div>